(self.webpackChunk_citrite_workspace_ui=self.webpackChunk_citrite_workspace_ui||[]).push([[299],{4317:function(e,t,n){"use strict";n.d(t,{N:function(){return c}});var i=n(29603),r=n(83721),o=n(27378),a=n(60751),s=n(53159),l=["files"];function c(e){var t=e.files,n=(0,r.Z)(e,l);return t.length?o.createElement(a.Rm,null,t.map((function(e){return o.createElement(s.C,(0,i.Z)({key:e.uploadId},n,{item:e}))}))):null}},21410:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var i,r=n(64357);!function(e){e.getByItem=function(e){var t=new r.Query;return t.from("Items"),t.actions("FileLock"),t.uri(e),t.method("GET"),t},e.createByItem=function(e,t){var n=new r.Query;return n.from("Items"),n.actions("FileLock"),n.uri(e),n.body(t),n.method("POST"),n},e.updateByItem=function(e,t){var n=new r.Query;return n.from("Items"),n.actions("FileLock"),n.uri(e),n.body(t),n.method("PATCH"),n},e.deleteByItem=function(e,t){var n=new r.Query;return n.from("Items"),n.actions("FileLock"),n.uri(e),n.actions("FileLock",t),n.method("DELETE"),n},e.discard=function(e,t){var n=new r.Query;return n.from("Items"),n.actions("FileLock"),n.uri(e),n.actions("FileLock",t),n.actions("Discard"),n.method("POST"),n}}(i||(i={}))},49718:function(e,t,n){"use strict";n.d(t,{r:function(){return c},J:function(){return f}});var i=n(73450),r=n(68121);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=["doc","docx","txt","pdf"],l=["ods","xlsb","xlsm","xlsx","odp","ppsx","pptx","docm","docx","odt"];function c(e){var t,n,i,o,c,f=e.item,p=e.itemCapabilities,h=e.parent,m=e.parentCapabilities,g=e.user,C=e.accountPrefs,v=d(C.IntegrationProviders),I=d(g.Integrations),k=d(g.Roles),F=f,S=(f.FileName||f.Name).split(".").pop().toLowerCase(),y=f.Info||{},w=h.Info||{},E=(f.PreviewStatus&r.HSQ.HasPreview)===r.HSQ.HasPreview,x=!1,b=!1,O=!1,Z=r.g5X.None;if((0,r.zE_)(f)){var _=F.VirusStatus||r.lVE.NotScanned;x=C.VirusStrictness>0&&_===r.lVE.VirusWarning,b=_===r.lVE.NotScanned&&2===C.VirusStrictness,O=(!D(r.FqW.FileVersioning)||w.IsVersioned)&&F.FileLockInfo&&null!=F.FileLockInfo.LockId}return O&&g.Id===F.FileLockInfo.Owner.Id&&!u(f)&&(Z|=r.g5X.CanCheckIn),w.IsAccountRoot||(0,r.qRC)(f)&&!D(r.FqW.FolderDownload)||x||!(w.CanDownload||w.CanWatermarkDownload&&E||D(r.FqW.FolderDownload)&&(0,r.qRC)(f)&&y.CanDownload)||(Z|=r.g5X.CanDownload),x||b||(0,r.qRC)(f)&&!D(r.FqW.FolderSend)||w.IsAccountRoot||!1===w.CanSend||!w.CanDownload&&!w.CanUpload||!(T(r.FqW.SharingSend)||T(r.FqW.AnonymousSharingSend)||T(r.FqW.Sharing))||!(D(r.FqW.SharingSend)||D(r.FqW.AnonymousSharingSend)||D(r.FqW.Sharing))||(Z|=r.g5X.CanShareEmail),Z&r.g5X.CanShareEmail&&(null===(t=C.SharePreferences)||void 0===t?void 0:t.SendShareLinkShareAccessLevels)&&(Z|=r.g5X.CanShareLink),(w.CanDeleteChildItems||y.CanDeleteCurrentItem)&&(!O||Z&r.g5X.CanCheckIn)&&(Z|=r.g5X.CanDelete),(w.CanDownload||w.CanUpload)&&w.CanDeleteChildItems&&(!O||Z&r.g5X.CanCheckIn)&&(Z|=r.g5X.CanEditMetadata),D(r.FqW.Move)&&(w.CanDownload||w.CanUpload)&&w.CanDeleteChildItems&&(!O||Z&r.g5X.CanCheckIn)&&!x&&(Z|=r.g5X.CanMove),D(r.FqW.Copy)&&w.CanDownload&&!x&&(Z|=r.g5X.CanCopy),!x&&!C.EnableDocPreviews&&w.CanUpload&&w.CanDownload&&w.IsVersioned&&l.indexOf(S)>-1&&(!O||Z&r.g5X.CanCheckIn||u(f))&&!function(e){return e.EnableCitrixManagedStorageZones&&e.HasPHI}(C)&&function(e,t){return!!t&&(t.ZoneType===r.AkQ.Private||t.ZoneType===r.AkQ.PrivateZeroKnowledge?!!(t.ZoneServices&r.bvJ.Editing):e.EnableOfficeOnlineEditing||e.EnableGoogleDriveEditing)}(C,h.Zone)&&(Z|=r.g5X.CanEditDocument),C.EnableDocumentApprovalWorkflow&&w.CanUpload&&w.CanDownload&&k(r.i44.Employee)&&D(r.FqW.DocumentApprovalWorkflow)&&(0,r.zE_)(f)&&(Z|=r.g5X.CanInitiateApproval),n=s.indexOf(S)>-1,i=C.EnableIntegrations&&v(r.BOe.RightSignature)&&!v(r.BOe.RightSignature4),o=!C.IsFINRA&&i,c=k(r.i44.Employee)&&w.CanDownload&&w.CanUpload,o&&c&&n&&!O&&!x&&D(r.FqW.RightSignature)&&I(r.BOe.RightSignature)&&(Z|=r.g5X.CanSignRS3),function(){var e=s.indexOf(S)>-1,t=k(r.i44.CanSendDocumentsForSignature)&&k(r.i44.Employee)&&w.CanDownload&&w.CanUpload,n=C.EnableIntegrations&&v(r.BOe.RightSignature4),i=!C.IsFINRA&&n;return e&&t&&i&&!O&&!x&&D(r.FqW.RightSignature4)}()&&(Z|=r.g5X.CanSignRS4),w.CanDownload&&w.CanUpload&&!O&&C.EnableFileLocking&&(!D(r.FqW.FileVersioning)||w.IsVersioned)&&!x&&D(r.FqW.HardLock)&&(0,r.zE_)(f)&&!u(f)&&(Z|=r.g5X.CanCheckOut),!u(f)&&(Z&r.g5X.CanCheckIn||O&&w.CanManagePermissions)&&(Z|=r.g5X.CanDiscardCheckout),function(){var e=p.find((function(e){return e.Name===r.FqW.Favorites}));if(!e)return!1;var t=e.SupportedDataTypes;if(!t)return!1;if((0,r.zE_)(f))return t.indexOf("File")>-1;if((0,r.qRC)(f))return t.indexOf("Folder")>-1;if((0,r.u$B)(f))return t.indexOf("Link")>-1;if((0,r.gi)(f))return t.indexOf("Note")>-1;if((0,r.LFq)(f))return t.indexOf("SymbolicLink")>-1;return!1}()&&(Z|=r.g5X.CanToggleFavorite),f.ItemOperations===Z?f:a(a({},f),{},{ItemOperations:Z});function D(e){return!!p.find((function(t){return t.Name===e}))}function T(e){return!!m.find((function(t){return t.Name===e}))}}function u(e){return!!e.FileLockInfo&&e.FileLockInfo.LockType===r.GnZ.CoauthLock}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return e.indexOf(t)>-1}}function f(e,t,n){var i=e;return!n.IsArchiveAccount&&!function(e){return/^https:\/\/.*\/Shares\(s.*\).*$/.test(e.url)}(e)&&!!t&&!!t.Roles&&(t.Roles.includes(r.i44.SuperUser)||e.Owner&&e.Owner.Id===t.Id||i.Info&&i.Info.CanManagePermissions||!!(e.ItemOperations&r.g5X.CanDelete)||n.CreatorCanDelete&&e.Creator&&e.Creator.Id===t.Id||e.Parent&&function(e,t){var n=e.Parent;return n.Info&&(n.Info.CanManagePermissions||n.Info.CanDeleteCurrentItem)||n.Id&&"box"===n.Id.toLowerCase().substring(0,3)&&t.Roles.includes(r.i44.AdminFileBoxAccess)}(e,t))}},23069:function(e,t,n){"use strict";n.d(t,{d:function(){return P}});var i=n(27378),r=n(6067),o=n(3409),a=n(34388),s=n(90932),l=n(41476),c=n(19394),u=n(25180),d=n(58640),f=n(55117),p=n(38638),h=n(54559),m=n(73450),g=n(57135),C=n.n(g),v=n(9604),I=n(22650),k=n(4317),F=n(66801),S=n(15687),y=n(90598),w=n(20883),E=n(19472),x=n(40046),b=n(68121),O=n(21410),Z=n(99527),_=n(25429),D=n(6834),T=n(86985),L=v.StyleSheet.create({checkinModal:{backgroundColor:T.grey200,minHeight:"100vh",maxHeight:"100vh",height:"100vh",display:"flex",flexDirection:"column",overflowY:"auto",overflowX:"hidden"},fileListWrapper:{minHeight:"220px",width:"100%",maxWidth:"770px",flexGrow:1,margin:"0 auto",display:"flex",flexDirection:"column",justifyContent:"center"},uploaderBox:{height:"100%",minHeight:"150px",maxHeight:"410px",backgroundColor:"#fff",display:"flex",flexDirection:"column",flexGrow:1},fileList:{border:"1px solid ".concat(T.grey300),padding:"20px"}}),q=function(e){(0,p.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,m.Z)((0,f.Z)(e),"state",{itemsToUpload:[]}),(0,m.Z)((0,f.Z)(e),"upload",(function(){var t=e.state.itemsToUpload[0];t.name=e.props.fileToCheckIn.FileName,t.uploadRequestParams.FileName=t.name,Z.rQ.apply(x,(0,c.Z)(e.state.itemsToUpload)).on("success",(function(t){return e.checkInFile(t[0])})),e.props.onCloseSuccess()})),(0,m.Z)((0,f.Z)(e),"reset",(function(){e.setState({errorMessage:"",itemsToUpload:[]})})),(0,m.Z)((0,f.Z)(e),"addFilesToList",function(){var t=(0,l.Z)(C().mark((function t(n){var i,r,o,s,l,u,d;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==n.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,D.pu)(e.props.fileToCheckIn.url);case 4:i=t.sent,r=i.value,o=r.some((function(e){return e.Name===b.FqW.UploadWithRequestParams})),s=r.some((function(e){return e.Name===b.FqW.FileVersioning})),l=n.map((function(t){return _.WJ(t,(function(t){return e.uploadRequest(t.uploadRequestParams,o,s)}))})),u=l[0],l.length>1||0!==e.state.itemsToUpload.length?(d=(0,a.t)("files:check_in.check_in_one_file"),l.length=0):e.props.fileToCheckIn.FileName.split(".").pop()!==u.name.split(".").pop()?(d=(0,a.t)("files:check_in.check_in_invalid_file_ext"),l.length=0):e.props.fileToCheckIn.FileName!==u.name&&(d=(0,a.t)("files:check_in.check_in_rename_file")),e.setState((function(e){return{errorMessage:d,itemsToUpload:[].concat((0,c.Z)(e.itemsToUpload),(0,c.Z)(l))}}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return(0,d.Z)(n,[{key:"render",value:function(){return i.createElement(S.xG,this.props,i.createElement("div",{className:(0,v.css)(L.checkinModal)},i.createElement(S.xB,{onDismiss:this.props.onDismiss},i.createElement(S.r6,null,"".concat((0,a.t)("files:check_in.check_in")," '").concat(this.props.fileToCheckIn.FileName,"'"))),i.createElement("div",{className:(0,v.css)(L.fileListWrapper)},this.state.errorMessage&&i.createElement(y.H4,null,this.state.errorMessage),i.createElement("div",{className:(0,v.css)(L.uploaderBox,this.state.itemsToUpload.length&&L.fileList)},i.createElement(I.b,{allowFilesToBeAdded:!this.state.itemsToUpload.length,files:this.state.itemsToUpload,removeAll:this.reset,onAddItems:this.addFilesToList}),i.createElement(k.N,{files:this.state.itemsToUpload,removeItem:this.reset,showFileSize:!0}))),i.createElement(S.mz,null,i.createElement(w.z.Primary,{disabled:0===this.state.itemsToUpload.length,onClick:this.upload},(0,a.t)("files:check_in.check_in")),i.createElement(w.z.Secondary,{onClick:this.props.onDismiss},(0,a.t)("files:check_in.cancel")))))}},{key:"checkInFile",value:function(e){var t=this;O.G.deleteByItem(this.props.fileToCheckIn.url,this.props.fileToCheckIn.FileLockInfo.LockId).execute().then((function(){(0,E.t5)((0,a.t)("files:check_in.file_checked_in"));var n={Id:e.shareFileId,FileLockInfo:null,url:t.props.fileToCheckIn.url.replace(/\((.*)\)/,"(".concat(e.shareFileId,")"))};e.shareFileId!==t.props.fileToCheckIn.Id&&(n.HasMultipleVersions=!0),t.props.updateItem(t.props.fileToCheckIn.Id,n)})).catch((function(e){return(0,E.cB)((0,F.V)(e))}))}},{key:"uploadRequest",value:function(e,t,n){var i=e.Overwrite||!n;return t?o.h.upload2(this.props.fileToCheckIn.Parent.url,(0,s.Z)((0,s.Z)({},e),{},{Overwrite:i})):o.h.upload(this.props.fileToCheckIn.Parent.url).queryString({method:e.Method,tool:e.Tool,unzip:e.Unzip,overwrite:i,fileName:e.FileName,fileSize:e.FileSize,batchId:e.BatchId,batchLast:e.BatchLast})}}]),n}(i.Component);function P(e,t){return o.h.get(e.fileToCheckIn.url).expand("Owner").expand("FileLockInfo").execute().then((function(n){n.FileLockInfo?t(i.createElement(q,{fileToCheckIn:e.fileToCheckIn,updateItem:e.updateItem})):(e.updateItem(e.fileToCheckIn.Id,{FileLockInfo:null}),(0,r.GO)({message:(0,a.t)("files:check_in.file_already_checked_in",{fileName:e.fileToCheckIn.Name}),title:(0,a.t)("files:check_in.unable_check_in")}))}))}},12781:function(e,t,n){"use strict";n.d(t,{q:function(){return v}});var i=n(29603),r=n(25180),o=n(58640),a=n(55117),s=n(38638),l=n(54559),c=n(73450),u=n(27378),d=n(52536),f=n(3409),p=n(49718),h=n(34388),m=n(50),g=n(55274),C=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),(0,c.Z)((0,a.Z)(e),"state",{details:e.props.item.Description}),(0,c.Z)((0,a.Z)(e),"onDetailsChange",(function(t){e.setState({details:t})})),(0,c.Z)((0,a.Z)(e),"save",(function(){var t={Description:e.state.details};return f.h.update(e.props.item.url,t,null,null,null,null,null,!0).execute().then(e.props.updateItem)})),e}return(0,o.Z)(n,[{key:"render",value:function(){var e=(0,p.J)(this.props.item,this.props.user,this.props.account.Preferences);return u.createElement(g.M,(0,i.Z)({},this.props,{canEdit:e,title:(0,h.t)("files:edit_item.details"),save:this.save,isValid:!0}),u.createElement(d.K,{rows:8,maxLength:4e3,disabled:!e,value:this.state.details,onChange:this.onDetailsChange.bind(this)}))}}]),n}(u.Component),v=(0,m.B)(C)},55274:function(e,t,n){"use strict";n.d(t,{M:function(){return C}});var i=n(29603),r=n(25180),o=n(58640),a=n(55117),s=n(38638),l=n(54559),c=n(73450),u=n(27378),d=n(66801),f=n(65547),p=n(15687),h=n(90598),m=n(20883),g=n(34388),C=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),(0,c.Z)((0,a.Z)(e),"state",{}),(0,c.Z)((0,a.Z)(e),"submit",(function(){e.setState({isSaving:!0}),e.props.save().then((function(){e.props.onCloseSuccess()})).catch((function(t){e.setState({isSaving:!1,errorMessage:(0,d.V)(t,(0,g.t)("files:edit_description.save_failed"))})}))})),e}return(0,o.Z)(n,[{key:"render",value:function(){return u.createElement(f.l,{onSubmit:this.submit},u.createElement(p.u_,(0,i.Z)({title:this.props.isAddNote?(0,g.t)("files:edit_item.add_note"):(0,g.t)("files:edit_item.view_details")},this.props),u.createElement(p.fe,null,this.state.errorMessage&&u.createElement(h.H4,null,this.state.errorMessage),this.props.children),u.createElement(p.mz,null,u.createElement(m.z.Primary,{active:this.state.isSaving,disabled:!this.props.isValid||!this.props.canEdit,type:"submit"},(0,g.t)("files:edit_item.save")),u.createElement(m.z.Secondary,{type:"button",onClick:this.props.onCloseSuccess},(0,g.t)("files:edit_item.cancel")))))}}]),n}(u.Component)},6834:function(e,t,n){"use strict";n.d(t,{pu:function(){return l},pK:function(){return u},qv:function(){return d}});var i=n(64357),r=n(2975),o=n(69322),a=n(46961),s={};function l(e){var t=i.getBaseApiUrl(e);if(s[t])return s[t];var n=r.A.get().execute(t);return s[t]=n,n}var c={};function u(e){var t=c[e]||function(e){return(0,a.s)().getUnencrypted("folder-id-map-".concat(e))}(e);if(!t){var n="";e&&(n="(".concat(e,")"));var i="".concat((0,o.kG)(),"Items").concat(n);d(e,i),t=i}return t}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&(c[e]=t,n&&f(e,t))}function f(e,t){(0,a.s)().setUnencrypted("folder-id-map-".concat(e),t)}},95098:function(e,t,n){"use strict";n.d(t,{t:function(){return c}});var i=n(66801),r=n(6067),o=n(32810),a=n(68121),s=n(34388),l=n(90301);function c(e){var t=(0,l.u)();o.j.link(a.BOe[a.BOe.Image32],a.$Wq[a.$Wq.View],e.Id,"ShareFile.Api.Models.Folder").execute().then((function(e){t.location.replace(e.Link)})).catch((function(e){t.close(),(0,r.GO)({message:(0,i.V)(e),title:(0,s.t)("files:error")})}))}}}]);
//# sourceMappingURL=299.28bf9e621347fff3a422.js.map