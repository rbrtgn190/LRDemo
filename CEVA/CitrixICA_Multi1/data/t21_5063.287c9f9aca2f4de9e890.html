(self.webpackChunk_citrite_workspace_ui=self.webpackChunk_citrite_workspace_ui||[]).push([[5063],{64357:function(e,t,r){"use strict";r.r(t),r.d(t,{MAXIMUM_REDIRECTION_ATTEMPTS:function(){return O},NetworkError:function(){return _},Query:function(){return w},RuntimeError:function(){return m},addOAuthCredential:function(){return R},configure:function(){return S},getBaseApiUrl:function(){return C},getConfiguration:function(){return T},sortDirections:function(){return k}});var n=r(14206),i=r.n(n),o=r(92471),s=r(18725);var u=r(68121),c=/[^#\$]+\$metadata#/,a=/(\w+)@Element/,h=/\w+\/(.+)@Element/,f=/\w+\/(.+)/,p=/(.+)/,d="ShareFile.Api.Models.",l=d+"ODataObject";function g(e){return function(e,t){if(!e||!t)return null;return Object.keys(t).forEach((function(r){var n=t[r];if("object"==typeof n)!function(e){return e instanceof Array}(n)?e[r]=g(n):e[r]=n.map((function(e){return"object"!=typeof e?e:g(e)}));else if("PreviewStatus"===r&&((0,u.zE_)(e)||(0,u.qRC)(e))||"ZoneServices"===r&&(0,u.TCR)(e)||("SendShareLinkShareAccessLevels"===r||"RequestShareLinkShareAccessLevels"===r)&&(0,u.KBH)(e)||"Services"===r&&(0,u.nox)(e)||"EventTypes"===r&&((0,u.JqI)(e)||(0,u.MiQ)(e)))!function(e,t,r){t[r].split(", ").forEach((function(t){switch(r){case"PreviewStatus":e[r]=e[r]|u.HSQ[t];break;case"ZoneServices":case"Services":e[r]=e[r]|u.bvJ[t];break;case"EventTypes":e[r]=e[r]|u.eHn[t];break;case"SendShareLinkShareAccessLevels":case"RequestShareLinkShareAccessLevels":e[r]=e[r]|u.cO3[t]}}))}(e,t,r);else if("string"==typeof n&&n.match(/^.{10}T.*Z$/)){var i=new Date(n);e[r]=isNaN(i.getTime())?n:i}else e[r]=n})),e}({"odata.type":e["odata.count"]?d+"ODataFeed<T>":function(e,t){if(!c.test(e))return l;var r,n=e.replace(c,"");if(a.test(n))r=a.exec(n);else if(h.test(n))r=h.exec(n);else if(f.test(n))r=f.exec(n);else{if(!p.test(n))return l;r=p.exec(n)}return function(e,t){var r=e&&0!==e.indexOf(d)?d+e:e;if(r===d+"Item"){if(y(t,"for"))return d+"SymbolicLink";if(y(t,"fo"))return d+"Folder";if(y(t,"fi"))return d+"File";if(y(t,"l"))return d+"Link";if(y(t,"n"))return d+"Note";if(y(t,"g"))return d+"Group"}if(r)return r;return l}(r[1],t)}(e["odata.metadata"],e.Id)},e)}function y(e,t){return e&&0===e.indexOf(t)}var m,v=function(){return(v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_="NetworkError";!function(e){e.ExceededMaximumRedirects="ExceededMaximumRedirects",e.RedirectionUnavailable="RedirectionUnavailable"}(m||(m={}));var k={ASCENDING:"asc",DESCENDING:"desc"},A={preRequest:function(e){return e},postRequest:function(){return Promise.resolve()},refreshAccessToken:null};function T(){return v({},A)}function S(e){Object.assign(A,e)}var b=[];function R(e){b.push(e)}var w=function(){function e(){var e=this;this._canceled=!1,this.cancel=function(t){e._cancelToken.cancel(t)},this._actions=[],this._api=new j,this._expandProperties=[],this._headers={},this._method="GET",this._passThroughRedirection=!1,this._queryString={},this._selectProperties=[],this._sortDirection="desc",this._cancelToken=i().CancelToken.source()}return e.prototype.fromEntityAction=function(e,t){return this._entityType=e,this.actions(t),this},e.prototype.from=function(e){return this._entityType=e,this},e.prototype.passThroughRedirection=function(e){return this._passThroughRedirection=e,this},e.prototype.addHeader=function(e,t){return this._headers[e]=t,this},e.prototype.select=function(e){return this._selectProperties.push(e),this},e.prototype.expand=function(e){return this._expandProperties.push(e),this},e.prototype.whereId=function(e){return this._id=e,this},e.prototype.uri=function(e){return this.whereId(e)},e.prototype.getUrl=function(e){void 0===e&&(e=A.baseApiUrl);var t=this.getWhereId(),r=this.getFrom()||"",n=this.getActions();0===e.indexOf("http")&&(e=C(e)),e.endsWith("/")||(e+="/");var i=e+r;"string"==typeof t&&(0===t.indexOf("http",0)?i=t:t.length>0&&(i+="("+t+")"));for(var o=0,s=n;o<s.length;o++){var u=s[o];i.endsWith("/")||(i+="/"),i+=u.actionName;for(var c="",a=0,h=Object.keys(u.parameters);a<h.length;a++){var f=h[a],p=u.parameters[f];c+=null!=p?f+"="+p+",":f+","}c.length>0&&(i+="("+(c=c.substr(0,c.length-1))+")")}return i},e.prototype.getUrlWithQuery=function(e){void 0===e&&(e=A.baseApiUrl);var t=this.getUrl(e);return new o(t).addQuery(this.getQueryString()).toString()},e.prototype.getCancellationToken=function(){return this._cancelToken.token},e.prototype.isCanceled=function(){return this._canceled},e.prototype.actions=function(e,t,r){var n=this._actions.find((function(t){return t.actionName===e}));return n||(n={actionName:e,parameters:{}},this._actions.push(n)),null!=t&&(n.parameters[t.toString()]=null!=r?r.toString():void 0),this},e.prototype.body=function(e){return this._body=e,this},e.prototype.method=function(e){return this._method=e,this},e.prototype.queryString=function(e){return Object.assign(this._queryString,e),this},e.prototype.skip=function(e){return this._skip=e.toString(),this},e.prototype.top=function(e){return this._top=e.toString(),this},e.prototype.filter=function(e){return this._filter=e,this},e.prototype.sortDirection=function(e){return this._sortDirection=e,this},e.prototype.sortBy=function(e){return this._sortBy=e,this},e.prototype.getWhereId=function(){return this._id},e.prototype.getSelect=function(){return this._selectProperties.join(",")},e.prototype.getExpand=function(){return this._expandProperties.join(",")},e.prototype.getFrom=function(){return this._entityType},e.prototype.getQueryString=function(){var e=this.getSelect(),t=this.getExpand(),r=this.getTop(),n=this.getSkip(),i=this.getSortDirection(),o=this.getSortBy(),s=this.getFilter(),u={};return null!=e&&e.length>0&&Object.assign(u,{$select:e}),null!=t&&t.length>0&&Object.assign(u,{$expand:t}),null!=n&&n.length>0&&Object.assign(u,{$skip:n}),null!=r&&r.length>0&&Object.assign(u,{$top:r}),null!=o&&o.length>0&&Object.assign(u,{$orderBy:o+" "+i}),null!=s&&s.length>0&&Object.assign(u,{$filter:s}),Object.assign(u,this._queryString),Object.keys(u).filter((function(e){return null!=u[e]})).reduce((function(e,t){return e[t]=u[t],e}),{})},e.prototype.getHeaders=function(){return this._headers},e.prototype.getTop=function(){return this._top},e.prototype.getFilter=function(){return this._filter},e.prototype.getSkip=function(){return this._skip},e.prototype.getSortDirection=function(){return this._sortDirection},e.prototype.getSortBy=function(){return this._sortBy},e.prototype.getMethod=function(){return this._method},e.prototype.getPassThroughRedirection=function(){return this._passThroughRedirection},e.prototype.getBody=function(){return this._body},e.prototype.getActions=function(){return this._actions},e.prototype.execute=function(e,t){var r=this;return void 0===t&&(t=!0),this._api.execute(this,e,t).catch((function(e){var t;return(t=e)&&t.__CANCELED__&&(r._canceled=!0),Promise.reject(e)}))},e}(),O=2;function x(e){return e&&401===e.status}var j=function(){function e(){}return e.prototype.execute=function(e,t,r){var n=this.composeRequestFromQuery(e,t);return this.executeApiRequest(n,r)},e.prototype.composeRequestFromQuery=function(e,t){var r=e.getHeaders();if(A.baseApiUrl||t)return{url:e.getUrlWithQuery(t),getRedirectionUrl:function(t){return(new w).queryString(e.getQueryString()).whereId(t).getUrlWithQuery()},body:e.getBody(),method:e.getMethod(),passThroughRedirection:e.getPassThroughRedirection(),cancelToken:e.getCancellationToken(),headers:r};console.error("[SFAPI] API not configured")},e.prototype.executeApiRequest=function(t,r){var n=this;if(!t)return Promise.reject("No request defined");t.headers["Content-Type"]="application/json";var i=t.url,o=JSON.stringify(t.body),c=t.method,a=[];return new Promise((function(h,f){var p=function(e){return f(e)};function d(){var e=n.addAuthorizationHeader(t,i),f=A.preRequest({body:o,headers:e,method:c,timeout:A.timeout,cancelToken:t.cancelToken,url:i});(0,s.LY)(f).then((function(e){if(null!==e&&"string"!=typeof e){var n;if(n=e instanceof Array?e.map((function(e){return g(e)})):g(e),(0,u.qK)(n)&&!t.passThroughRedirection||(0,u.LFq)(n)&&r){a.push({request:f,result:e});var s=n,l=n;return function(e){return e.filter((function(e){return!x(e.failure)}))}(a).length<=O?!1===s.Available?void p({kind:m.RedirectionUnavailable,attempts:a,responseJSON:{message:{value:"Resource unavailable"}}}):(l.Link?i=l.Redirection&&l.Redirection.Uri?t.getRedirectionUrl(l.Redirection.Uri):t.getRedirectionUrl(l.Link):(i=s.Uri,o=s.Body||o,c=s.Method||c),void d()):void p({kind:m.ExceededMaximumRedirects,attempts:a})}h(n||e)}else h(e)})).catch(s.VH).catch((function(e){var t={};e.headers&&Object.keys(e.headers).forEach((function(r){t[r.toLowerCase()]=e.headers[r]})),e.headers=t,A.postRequest(e,i).then((function(){if(!n.startFormsAuthenticationIfNecessary(e.headers,i,d,p)){if(x(e)){var t=a[a.length-1];if(t&&t.failure&&x(t.failure))return void p(v({},e,{kind:_}));if(a.push({request:f,failure:e}),n.urlMatchesBaseUrl(i,A.baseApiUrl)&&A.refreshAccessToken)return void n.refreshAccessToken(A.refreshAccessToken).then((function(){d()})).catch((function(){p(v({},e,{kind:_}))}));if(n.needsIFrameAuthForConnectors()){var r=document.createElement("iframe");return r.style.display="none",r.src=i,document.body.appendChild(r),void r.addEventListener("load",(function(){document.body.removeChild(r),d()}))}}p(v({},e,{kind:_}))}})).catch((function(){}))}))}e.pendingAccessTokenRefresh?e.pendingAccessTokenRefresh.then((function(){d()})):d()}))},e.prototype.addAuthorizationHeader=function(e,t){var r=e.headers;if("Authorization"in r)return r;for(var n=0,i=[{accessToken:A.accessToken,baseUrl:A.baseApiUrl}].concat(b);n<i.length;n++){var o=i[n],s=o.accessToken,u=o.baseUrl;if(this.urlMatchesBaseUrl(t,u)&&s)return v({},r,{Authorization:"Bearer "+s})}return r},e.prototype.urlMatchesBaseUrl=function(e,t){return C(e).toLowerCase()===t.toLowerCase()},e.prototype.refreshAccessToken=function(t){return e.pendingAccessTokenRefresh||(e.pendingAccessTokenRefresh=t().then((function(t){delete e.pendingAccessTokenRefresh,S({accessToken:t})})).catch((function(t){return delete e.pendingAccessTokenRefresh,Promise.reject(t)}))),e.pendingAccessTokenRefresh},e.prototype.startFormsAuthenticationIfNecessary=function(t,r,n,i){var s=this,u=t["www-authenticate"];if(!u)return!1;if(e.pendingFormsAuthentication)return e.pendingFormsAuthentication.then((function(){n()})),!0;var c=u.match(/Forms (.*) Token (.*)/),a=new o(r).search(!0).root;if(!a)return!1;if(this.authenticateWithTokenFromRedirect(a,c[2],n))return!0;var h=new o(c[1]).addQuery({root:a});return A.formsAuthHandler?(e.pendingFormsAuthentication=A.formsAuthHandler((function(e){return h.addQuery({redirect_url:e}).href()})).then((function(e){return s.executeTokenAuthenticationWithCode(a,c[2],e,n)})).catch((function(t){delete e.pendingFormsAuthentication,i(t)})),!0):(h.addQuery({redirect_url:window.location.toString()}),window.location.replace(h.href()),!0)},e.prototype.authenticateWithTokenFromRedirect=function(t,r,n){var i=new o(window.location.toString()).hash().match(/\?code=(.*)/);return!!i&&(e.pendingFormsAuthentication=this.executeTokenAuthenticationWithCode(t,r,i[1],n),!0)},e.prototype.executeTokenAuthenticationWithCode=function(t,r,n,i){var u=new o(r).addQuery({code:n,root:t});return(0,s.GO)(u.href()).then((function(){i(),delete e.pendingFormsAuthentication})).catch((function(){delete e.pendingFormsAuthentication}))},e.prototype.needsIFrameAuthForConnectors=function(){return this.isBrowser("edge")||this.isBrowser("safari")},e.prototype.isBrowser=function(e){return"undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().includes(e)},e}();function C(e){var t=new o(e),r=t.segment();return r.length<2?e:t.pathname("").query("").hash("").segment(r.slice(0,2)).toString()+"/"}},18725:function(e,t,r){"use strict";r.d(t,{LY:function(){return s},GO:function(){return u},VH:function(){return c}});var n=r(14206),i=r.n(n),o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e){return Promise.resolve(i()({method:e.method,url:e.url,withCredentials:!0,data:e.body,headers:e.headers,timeout:e.timeout})).catch((function(e){return i().isCancel(e)?Promise.reject(o({},e,{__CANCELED__:!0})):Promise.reject(e)})).then((function(e){return 204===e.status?null:e.data}))}function u(e){return Promise.resolve(i().get(e))}function c(e){if(!e){var t={responseJSON:null,responseText:null,status:null,headers:{}};return Promise.reject(t)}if(!e.response){t={responseJSON:e.message,responseText:e.message,status:null,headers:{}};return Promise.reject(t)}var r={responseJSON:e.response.data,responseText:JSON.stringify(e.response.data),status:e.response.status,headers:e.response.headers};return Promise.reject(r)}}}]);
//# sourceMappingURL=5063.287c9f9aca2f4de9e890.js.map