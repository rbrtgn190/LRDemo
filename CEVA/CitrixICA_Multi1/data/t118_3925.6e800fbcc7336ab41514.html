(self.webpackChunk_citrite_workspace_ui=self.webpackChunk_citrite_workspace_ui||[]).push([[3925],{93925:function(e,t,n){"use strict";n.d(t,{s:function(){return an}});var a=n(59245),o=n(34388),r=n(27378),i=n(4160),l=n(34983),c=n(32440),s=function(e){var t=e.setMobileMastheadTitle,n=(0,c.SE)().isIWSEnabled;return r.useEffect((function(){return t((0,a.t)(n?"Workspace:notification_stream.activity_feed":"Workspace:home")),function(){t("")}}),[n,t]),null},d=n(19509),u=n(55478),g={id:"layout01",grid:{rows:[{columns:[{columnSpan:12}]}]}},p={id:"layout02",grid:{rows:[{columns:[{columnSpan:8},{columnSpan:4}]}]}},m=[g,p,{id:"layout03",grid:{rows:[{columns:[{columnSpan:6},{columnSpan:6}]}]}},{id:"layout04",grid:{rows:[{columns:[{columnSpan:4},{columnSpan:4},{columnSpan:4}]}]}}],f=function(){return m.map((function(e){return e.id}))},w=function(e){return m.find((function(t){return t.id===e}))},v={id:"mobile",grid:{rows:[{columns:[{columnSpan:12}]}]}},h=n(64617),x={layout:g,widgets:{rows:[{columns:[{widgets:[{widgetId:h.ly},{widgetId:h.bU},{widgetId:h.qf}]}]}]}},b=y(h.Rj),E=y(h.AE);function y(e){return{layout:p,widgets:{rows:[{columns:[{widgets:[{widgetId:e}]},{widgets:[{widgetId:h.ai},{widgetId:h.cT},{widgetId:h.ON},{widgetId:h.MK}]}]}]}}}var C={layout:v,widgets:{rows:[{columns:[{widgets:[{widgetId:h.AE}]}]}]}},I={layout:v,widgets:{rows:[{columns:[{widgets:[{widgetId:h.ly},{widgetId:h.bU},{widgetId:h.qf}]}]}]}},k=n(25180),S=n(58640),Z=n(55117),W=n(38638),P=n(54559),D=n(73450),z=n(20883),H=n(54903),M=n(29603),_=n(41476),N=n(90932),F=n(64897),L=n(57135),B=n.n(L),T=n(19472),j=n(41519),q=n(98784);var R=n(48761),O=n(2929),U=n(4853),A=n(20913);var K=(0,O.Z)("div",{target:"e6o5hox2"})({name:"14eft4e",styles:"display:flex;justify-content:center;position:relative;z-index:1"}),G=(0,O.Z)("div",{target:"e6o5hox1"})("display:flex;width:100%;",U.onMobile,"{flex-flow:column;}"),Y=(0,O.Z)("div",{target:"e6o5hox0"})("flex-basis:",(function(e){return"".concat(e.widthPercentage,"%")}),";max-width:",(function(e){return"".concat(e.widthPercentage,"%")}),";",(function(e){return e.isLast?"":"margin-right: ".concat(A.largeSpace)}),";",U.onMobile,"{flex-basis:100%;max-width:100%;margin-right:0;}"),Q=n(75219),J=(0,O.Z)("div",{target:"e1bm48y01"})("display:flex;justify-content:space-between;padding:0px 0px ",A.mediumSpace,";"),V=(0,O.Z)("div",{target:"e1bm48y00"})("font-size:",Q.sizes.xl,";"),X=n(19394),$=n(69467),ee=n(51974),te=n(86985);var ne=(0,O.Z)("span",{target:"egb51y65"})("top:",A.largeSpace,";right:",A.largeSpace,";position:absolute;",U.onSmallScreen,"{left:",A.mediumLargeSpace,";}"),ae=(0,O.Z)("div",{target:"egb51y64"})({name:"1b1rkje",styles:"padding:56px 0px 28px 48px;max-width:70%;flex-shrink:0"}),oe=(0,O.Z)("div",{target:"egb51y63"})("font-size:",Q.sizes.xl4,";font-weight:",Q.weights.semiBold,";padding-bottom:",A.mediumSpace,";"),re=(0,O.Z)("div",{target:"egb51y62"})("font-size:",Q.sizes.lg,";"),ie=(0,O.Z)("div",{target:"egb51y61"})("background-color:",te.grey100,";display:flex;flex-direction:column;padding:",A.smallSpace," ",A.largeSpace," 0px ",A.largeSpace,";overflow-y:auto;"),le=(0,O.Z)("div",{target:"egb51y60"})({name:"b6wrti",styles:"display:flex;flex-direction:column;width:100%"});var ce=(0,O.Z)(z.z.Wrapper,{target:"eeeezq7"})({name:"1cdfyiu",styles:"align-self:stretch;flex-shrink:0"}),se=(0,O.Z)("div",{target:"eeeezq6"})("background-color:",te.white,";display:flex;margin-bottom:",A.smallSpace,";width:100%;border-radius:8px;:hover{background-color:",te.grey200,";}"),de=(0,O.Z)("div",{target:"eeeezq5"})({name:"sc51y",styles:"display:flex;flex-direction:column;justify-content:space-between;padding:20px 0px"}),ue=(0,O.Z)("div",{target:"eeeezq4"})("align-items:center;background-color:",te.teal100,";border-radius:16px;background-clip:padding-box;display:flex;height:80px;justify-content:center;margin:",A.mediumSpace,";overflow:hidden;width:80px;"),ge=(0,O.Z)("div",{target:"eeeezq3"})("font-size:",Q.sizes.lg,";font-weight:",Q.weights.semiBold,";"),pe=(0,O.Z)("span",{target:"eeeezq2"})("font-size:",Q.sizes.sml,";font-weight:",Q.weights.semiBold,";color:",te.teal600,";margin-left:",A.mediumSpace,";text-transform:uppercase;"),me=(0,O.Z)("div",{target:"eeeezq1"})("font-size:",Q.sizes.base,";"),fe=(0,O.Z)("div",{target:"eeeezq0"})("font-size:",Q.sizes.sml,";color:",te.grey500,";"),we=function(e){var t=e.widget.icon;return r.createElement(ce,{onClick:e.addWidget,"data-testid":"widget-catalog-item-".concat(e.widget.id)},r.createElement(se,null,r.createElement(ue,null,r.createElement(t,null)),r.createElement(de,null,r.createElement(ge,null,r.createElement("span",{"data-testid":"item-title-value"},e.widget.title()),e.widget.isNew&&r.createElement(pe,null,(0,a.t)("Workspace:widget_catalog.new"))),r.createElement(me,null,e.widget.description()),r.createElement(fe,null,e.widget.source))))},ve=n(62971),he=function(){var e=(0,ve.N)(),t=e.resolveByCapability(o.fy.UNSTABLE_widgetComponent);return{getWidget:function(n){var a=(0,h.HF)().find((function(e){return e.id===n}));if(a&&(!a.isEnabled||a.isEnabled(e))){var o=xe(a,t);if(o.loadableWidget||o.Component)return o}},getAllWidgets:function(){return(0,h.HF)().filter((function(t){return t.id!==h.AE&&(!t.isEnabled||t.isEnabled(e))})).map((function(e){return xe(e,t)})).filter((function(e){return!!e.loadableWidget||!!e.Component}))}}};function xe(e,t){return{id:e.id,title:e.title,description:e.description,icon:e.icon,isNew:(a=e.newUntil,!!a&&a.getTime()>Date.now()),source:(n=e.provider,n===h.HS.core?"Citrix":null),inpIntegrationGlobalId:e.inpIntegrationGlobalId,loadableWidget:t.find((function(t){return t.integrationId===e.mfeName&&t.registration.moduleKey===e.mfeRenderer})),Component:e.Component};var n,a}var be=function(e){var t=he(),n=(0,X.Z)(t.getAllWidgets());return r.createElement($.U,e,r.createElement(ne,null,r.createElement(z.z.IconOnly,{"data-analytics-id":"ComposableHomepageWidgetCatalogClose",onClick:e.onDismiss,icon:ee.b,title:(0,a.t)("Workspace:close"),size:16})),r.createElement(le,null,r.createElement(ae,null,r.createElement(oe,null,(0,a.t)("Workspace:widget_catalog.section_title")),r.createElement(re,null,(0,a.t)("Workspace:widget_catalog.section_description"))),r.createElement(ie,null,n.sort((function(e,t){return e.title().localeCompare(t.title())})).sort(Ee).map((function(t){return r.createElement(we,{addWidget:function(){return n=t.id,e.addWidget(n),void e.onDismiss();var n},widget:t,key:t.id})})))))};function Ee(e,t){return e.isNew?t.isNew?0:-1:0}var ye=n(43937),Ce=n(63666);var Ie=(0,O.Z)("div",{target:"esx22pf4"})({name:"1d3w5wq",styles:"width:100%"}),ke=(0,O.Z)("div",{target:"esx22pf3"})("font-size:",Q.sizes.lg,";margin:",A.tinySpace," 0px;display:flex;height:40px;align-items:center;"),Se=(0,O.Z)("div",{target:"esx22pf2"})("display:flex;flex-direction:row;align-items:center;background-color:",(0,Ce.SY)("primaryContainerBackground"),";border-radius:8px;width:100%;margin:",A.mediumSpace," 0px ",A.largeSpace," 0px;padding:",A.mediumLargeSpace," 0px;"),Ze=(0,O.Z)("div",{target:"esx22pf1"})("font-size:",Q.sizes.base,";margin-left:",A.mediumSpace,";"),We=(0,O.Z)("div",{target:"esx22pf0"})("margin-left:",A.mediumLargeSpace,";height:64px;width:64px;"),Pe=function(e){var t=e.icon;return r.createElement(Ie,null,r.createElement(ke,null,r.createElement(ye.NZ,null,e.title())),r.createElement(Se,null,r.createElement(We,null,r.createElement(t,null)),r.createElement(Ze,null,(0,a.t)("Workspace:integration_widget_unavailable",{integrationName:e.title()}))))},De=n(9604),ze=De.StyleSheet.create({home:{display:"flex",justifyContent:"center"},primaryContent:(0,D.Z)({flexGrow:2,flexBasis:"66%",maxWidth:"1260px",marginRight:"32px"},U.onMobile,{marginRight:0}),widgetsColumn:{flexGrow:1,flexBasis:"33%",maxWidth:"496px",minWidth:0},widget:{marginBottom:A.largeSpace}}),He=function(e){return r.createElement("div",{"data-testid":e["data-testid"],className:(0,De.css)(ze.widget)},e.children)},Me=n(13452);var _e=(0,O.Z)("div",{target:"etit1n43"})({name:"1eqldho",styles:"align-items:flex-end;display:flex;height:40px"}),Ne=(0,O.Z)("div",{target:"etit1n42"})("align-items:center;background:",(0,Ce.SY)("primaryContainerBackground"),";border-radius:8px;display:flex;flex-direction:column;height:340px;justify-content:center;margin-bottom:",A.mediumSpace,";margin-top:",A.mediumSpace,";"),Fe=(0,O.Z)("div",{target:"etit1n41"})("font-weight:",Q.weights.semiBold,";font-size:",Q.sizes.base,";margin-bottom:",A.mediumSpace,";margin-top:",A.mediumSpace,";"),Le=(0,O.Z)("img",{target:"etit1n40"})({name:"1unnjnn",styles:"height:64px;width:64px"}),Be=function(e){var t=e.widgetTitle,n=e.integration,o=e.hideConnectButton;return r.createElement("div",null,r.createElement(_e,null,r.createElement(ye.NZ,null,t)),r.createElement(Ne,null,r.createElement(Le,{src:n.icon}),r.createElement(Fe,null,(0,a.t)("Workspace:disconnected_widget_text")),!o&&r.createElement(z.z.BabyPrimary,{onClick:n.connect},(0,a.t)("Workspace:connect_personal_integration",{integrationName:n.name}))))},Te=function(e){var t,n,a,o,i=e.widgetCatalogItem,l=e.connectDisabled,c=(0,Me.Z)();if(c.isLoading)return r.createElement(He,null,r.createElement(u.U,null));var s=null===(t=c.data)||void 0===t?void 0:t.find((function(e){return e.globalId===i.inpIntegrationGlobalId}));if(!s)return r.createElement(He,null,r.createElement(Pe,i));var d=null===(n=i.loadableWidget)||void 0===n?void 0:n.loading,g=(null===(a=i.loadableWidget)||void 0===a||null===(o=a.value)||void 0===o?void 0:o.Component)||i.Component;return s.isConnected?d?r.createElement(He,null,r.createElement(u.U,null)):g?r.createElement(He,{"data-testid":"widget-".concat(i.id)},r.createElement(g,null)):null:r.createElement(Be,{widgetTitle:i.title(),integration:s,hideConnectButton:l})};function je(){var e={};return function(t){return e[t]=e[t]?e[t]+=1:1,"".concat(t,"-").concat(e[t])}}var qe=n(97032);var Re=(0,O.Z)("div",{target:"e91phad2"})("background-color:",te.white,";border:none;border-radius:8px;margin-bottom:32px;padding:24px;",(function(e){return e.isHovered&&!e.isDragging?"outline: 2px dashed ".concat(te.grey600):""}),";",(function(e){return e.isHovered?"box-shadow: 0 0 2px 0 inset rgba(80, 80, 80, .1)":""}),";opacity:",(function(e){return e.isDragging?".5":"1"}),";position:relative;"),Oe=(0,O.Z)("div",{target:"e91phad1"})({name:"759krm",styles:"position:absolute;right:10px;top:10px;z-index:2"}),Ue=(0,O.Z)("div",{target:"e91phad0"})({name:"83cnk5",styles:"bottom:0;cursor:grab;left:0;position:absolute;right:0;top:0;z-index:1"}),Ae="widget",Ke=(0,qe.Ej)(Ae,{beginDrag:function(e){return e.onDragStart(),{widgetPosition:(0,N.Z)({},e.widgetPosition)}},endDrag:function(e){e.onDragEnd()}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})),Ge=(0,qe.GR)(Ae,{drop:function(e,t){e.onDragAndDrop(t.getItem().widgetPosition,e.widgetPosition)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isHovered:t.isOver()}}))(Ke((function(e){var t=e.childComponent,n=e.isDragging,o=e.isHovered;return r.createElement(r.Fragment,null,e.connectDropTarget(e.connectDragSource(r.createElement("div",{"data-testid":e["data-testid"]},r.createElement(Re,{isDragging:n,isHovered:o},r.createElement(Oe,null,r.createElement(z.z.IconOnly,{icon:ee.b,title:(0,a.t)("Workspace:remove_widget"),size:16,onClick:function(){return e.onRemove({rowIndex:e.widgetPosition.rowIndex,columnIndex:e.widgetPosition.columnIndex,widgetIndex:e.widgetPosition.widgetIndex})},"data-testid":"remove-widget-button"})),r.createElement(Ue,null),r.createElement(t,null))))))})));var Ye=(0,O.Z)(Re,{target:"e1xv3xw0"})({name:"qvvfoq",styles:"height:240px;opacity:0.5"}),Qe=(0,qe.GR)(Ae,{drop:function(e,t){e.onDrop(t.getItem().widgetPosition,e.widgetPosition)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isHovered:t.isOver()}}))((function(e){return r.createElement(r.Fragment,null,e.connectDropTarget(r.createElement("div",null,r.createElement(Ye,{isHovered:e.isHovered,isDragging:!1}))))})),Je=n(28907);function Ve(e){var t=[];return e.rows.forEach((function(e){e.columns.forEach((function(e){e.widgets.forEach((function(e){t.push(e)}))}))})),t}function Xe(e,t){return(0,Je.Uy)(e,(function(e){e.rows[t.rowIndex].columns[t.columnIndex].widgets.splice(t.widgetIndex,1)}))}function $e(e,t,n){return(0,Je.Uy)(e,(function(e){e.rows[n.rowIndex].columns[n.columnIndex].widgets=[].concat((0,X.Z)(e.rows[n.rowIndex].columns[n.columnIndex].widgets.slice(0,n.widgetIndex)),[t],(0,X.Z)(e.rows[n.rowIndex].columns[n.columnIndex].widgets.slice(n.widgetIndex)))}))}var et=(0,R.a)((function(e){var t=he(),n=function(t,n){(0,j.L)("ComposableHomepageWidgetMove");var a=function(e,t,n){if(o=n,(a=t).rowIndex===o.rowIndex&&a.columnIndex===o.columnIndex&&a.widgetIndex===o.widgetIndex)return e;var a,o,r=e.rows[t.rowIndex].columns[t.columnIndex].widgets[t.widgetIndex];return $e(Xe(e,t),r,n)}(e.composablePage.widgets,t,n);e.setWidgetMapping(a)},o=function(t){(0,j.L)("ComposableHomepageWidgetRemove");var n=Xe(e.composablePage.widgets,t);e.setWidgetMapping(n)},l=function(){e.onDragStart()},c=function(){e.onDragEnd()},s=function(t){(0,j.L)("ComposableHomepageWidgetAdd",{widget:t});var n=$e(e.composablePage.widgets,{widgetId:t},{rowIndex:0,columnIndex:0,widgetIndex:0});e.setWidgetMapping(n)};return r.createElement(i.M,null,r.createElement(J,null,r.createElement(V,null,(0,a.t)("Workspace:arrange_widgets")),r.createElement(z.z.Primary,{"data-analytics-id":"ComposableHomepageWidgetCatalogOpen","data-testid":"composable-homepage-widget-catalog-open",onClick:function(){e.showBlade(r.createElement(be,{addWidget:s}))}},(0,a.t)("Workspace:add_widget"))),r.createElement(K,null,e.composablePage.layout.grid.rows.map((function(a,i){return r.createElement(tt,{row:a,rowIndex:i,widgets:e.composablePage.widgets.rows[i],widgetCatalog:t,key:"idx-".concat(i),onWidgetDragAndDrop:n,onPlaceholderDrop:n,onWidgetRemove:o,"data-testid":"row-".concat(i),onWidgetDragStart:l,onWidgetDragEnd:c})}))))})),tt=function(e){var t=e.row.columns.map((function(e){return(e.columnSpan/12*100).toFixed(2)})),n=je();return r.createElement(r.Fragment,null,t.map((function(a,o){return r.createElement(Y,{widthPercentage:a,isLast:o===t.length-1,key:o,"data-testid":"column-".concat(o)},r.createElement(r.Fragment,null,e.widgets.columns[o].widgets.map((function(t,a){var i,l,c=e.widgetCatalog.getWidget(t.widgetId);if(!c)return null;var s=(null===(i=c.loadableWidget)||void 0===i||null===(l=i.value)||void 0===l?void 0:l.Component)||c.Component,d=n(t.widgetId);if(s){var u=c.inpIntegrationGlobalId?function(){return r.createElement(Te,{widgetCatalogItem:c,connectDisabled:!0})}:s;return r.createElement(Ge,{"data-testid":"widget-".concat(t.widgetId,"-").concat(o,"-").concat(a),key:d,widgetPosition:{rowIndex:e.rowIndex,columnIndex:o,widgetIndex:a},onDragAndDrop:e.onWidgetDragAndDrop,childComponent:u,onRemove:e.onWidgetRemove,onDragStart:e.onWidgetDragStart,onDragEnd:e.onWidgetDragEnd})}return null})),r.createElement(Qe,{widgetPosition:{rowIndex:e.rowIndex,columnIndex:o,widgetIndex:e.widgets.columns[o].widgets.length},onDrop:e.onPlaceholderDrop})))})))};var nt=(0,O.Z)("div",{target:"epzlfh2"})("border-bottom:1px solid ",te.grey300,";width:100%;"),at=(0,O.Z)("div",{target:"epzlfh1"})({name:"1p825ns",styles:"padding:0px 0px 16px 40px;flex:1 1 100%;font-size:16px"}),ot=(0,O.Z)("div",{target:"epzlfh0"})({name:"1lr53ri",styles:"display:flex;flex:1 1 100%;flex-direction:row;padding:0px 0px 40px 40px"});var rt=(0,O.Z)("div",{target:"e133jk092"})("background-color:",te.grey200,";border-radius:8px;box-shadow:inset 0 8px ",te.teal400,";display:flex;height:115px;margin-right:12px;padding:12px;width:150px;flex-direction:column;",(function(e){return e.selected?"border: 2px solid ".concat(te.teal500):"border: 2px solid ".concat(te.white)}),";"),it=(0,O.Z)("div",{target:"e133jk091"})({name:"oce8zf",styles:"display:flex;flex:1 1 100%;flex-direction:row"}),lt=(0,O.Z)("div",{target:"e133jk090"})("background-color:",te.purple500,";border-radius:4px;margin:3px 3px 5px 3px;flex-basis:",(function(e){return"".concat(e.widthPercentage,"%")}),";max-width:",(function(e){return"".concat(e.widthPercentage,"%")}),";");function ct(e){return r.createElement(z.z.Wrapper,{"data-testid":e["data-testid"],onClick:function(){return e.onClick(e.layout.id)}},r.createElement(rt,{selected:e.selected},e.layout.grid.rows.map((function(t,n){return r.createElement(st,{key:"".concat(e.layout.id,"-row-idx-").concat(n),row:t})}))))}function st(e){var t=e.row.columns.map((function(e){return(e.columnSpan/12*100).toFixed(2)}));return r.createElement(it,null,t.map((function(t,n){return r.createElement(lt,{key:"row-idx-".concat(t,"-").concat(n),widthPercentage:t,"data-testid":e["data-testid"]})})))}var dt,ut,gt=n(49193),pt=n(99982),mt=function(){var e=(0,c.SE)().isIWSEnabled,t=(0,gt.j)().workspaceConfiguration,n=E;return(0,o.Nc)(t,pt.T.ComposableHomepageEditing)&&(n=b),e?n:x},ft=function(e){var t=mt().layout.id,n=[t].concat((0,X.Z)(e.availableLayoutIds.filter((function(e){return e!==t}))));return r.createElement(nt,null,r.createElement(at,null,(0,a.t)("Workspace:layouts")),r.createElement(ot,null,n.map((function(t){return r.createElement(ct,{selected:t===e.selectedLayoutId,onClick:function(){return e.onSelectionChange(t)},key:t,layout:w(t),"data-testid":"".concat(t===e.selectedLayoutId?"selected-composable-layout":"composable-layout","-").concat(t)})}))))},wt=n(15687),vt=n(10043);var ht=null===(dt=window.CSS)||void 0===dt||null===(ut=dt.supports)||void 0===ut?void 0:ut.call(dt,"position","sticky"),xt=(0,O.Z)(wt.xG,{target:"ek5gheh2"})("background-color:",te.white,";overflow-y:auto;"),bt=(0,vt.iv)("background-color:",te.white,";position:sticky;top:0;z-index:2;",""),Et=(0,O.Z)(wt.xB,{target:"ek5gheh1"})("border-bottom:none;display:flex;justify-content:space-between;padding:40px 40px 24px;",ht?bt:"",";"),yt=(0,O.Z)(wt.r6,{target:"ek5gheh0"})({name:"iaudku",styles:"align-self:center;font-weight:600;font-size:26px;:not(:last-child){margin-bottom:0;}"}),Ct=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],It=function(e){var t=mt(),n=r.useRef(null),o=r.useRef(),i=r.useState(!1),l=(0,F.Z)(i,2),c=l[0],s=l[1],d=r.useState(e.composablePage),u=(0,F.Z)(d,2),g=u[0],p=u[1],m=function(){var t=(0,_.Z)(B().mark((function t(){var n;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,e.setComposablePage(g);case 3:n=t.sent,s(!1),n?v():(0,T.cB)((0,a.t)("Workspace:composable_homepage_save_failure"));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){e.onDismiss()};return r.useEffect((function(){return function(){var e;null===(e=o.current)||void 0===e||e.call(o)}})),r.createElement(xt,(0,M.Z)({},e,{bubbleEvents:Ct}),r.createElement("div",{ref:n,"data-testid":"composable-homepage-modal"},r.createElement(Et,null,r.createElement(yt,null,(0,a.t)("Workspace:editing_home")),r.createElement("div",null,r.createElement(z.z.Primary,{"data-analytics-id":"ComposableHomepageSave","data-testid":"composable-homepage-save-button",onClick:m,active:c},(0,a.t)("Workspace:save")),r.createElement(z.z.Secondary,{"data-analytics-id":"ComposableHomepageReset","data-testid":"composable-homepage-reset-button",onClick:function(){p(t)}},(0,a.t)("Workspace:reset_to_default")),r.createElement(z.z.Secondary,{"data-analytics-id":"ComposableHomepageCancel","data-testid":"composable-homepage-cancel-button",onClick:function(){v()}},(0,a.t)("Workspace:cancel")))),r.createElement(ft,{selectedLayoutId:g.layout.id,availableLayoutIds:f(),onSelectionChange:function(e){(0,j.L)("ComposableHomepageLayoutSelected",{layout:e});var t=w(e),n=function(e,t){var n,a=function(e){for(var t={rows:[]},n=e.rows,a=0;a<n.length;a++){var o={columns:n[a].columns.map((function(e){return{widgets:[]}}))};t.rows.push(o)}return t}(t),o=(n=[],a.rows.forEach((function(e){e.columns.forEach((function(e){n.push(e)}))})),n),r=Ve(e);if(!r.length)return a;for(var i=Math.floor(r.length/o.length),l=r.length%o.length,c=0,s=0;s<o.length;s++){var d=c,u=d+i;l>0&&(u++,l--),o[s].widgets=r.slice(d,u),c=u}return a}(g.widgets,t.grid);p({layout:t,widgets:n})}}),r.createElement(et,{setWidgetMapping:function(e){p((0,N.Z)((0,N.Z)({},g),{},{widgets:e}))},composablePage:g,onDragStart:function(){var e;o.current=function(e,t){var n,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=!1,i=(0,q.throttle)((function(e){e.clientY<=t||e.clientY>=window.innerHeight-o?r||l(e.clientY<=t):r&&c()}),100),l=function(t){r=!0,n=requestAnimationFrame((function o(r){if(void 0===a&&(a=r),0===e.scrollTop&&t)c();else{var i=(r-a)/3;e.scrollTop=e.scrollTop+(t?-i:i),a=r,n=requestAnimationFrame(o)}}))},c=function(){i.cancel(),n&&(cancelAnimationFrame(n),n=void 0),r=!1,a=void 0};return e&&document.addEventListener("drag",i),function(){r&&c(),document.removeEventListener("drag",i)}}(null===(e=n.current)||void 0===e?void 0:e.parentElement,150,100)},onDragEnd:function(){o.current&&(o.current(),o.current=null)}})))};var kt=(0,O.Z)("div",{target:"e1d66ec20"})({name:"skgbeu",styles:"display:flex;justify-content:flex-end"}),St=function(e){(0,W.Z)(n,e);var t=(0,P.Z)(n);function n(){var e;(0,k.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,D.Z)((0,Z.Z)(e),"state",{isModalOpen:!1}),(0,D.Z)((0,Z.Z)(e),"edit",(function(){e.setIsModalOpen(!0),e.props.showModal(r.createElement(It,{setComposablePage:e.props.setComposablePage,composablePage:e.props.composablePage,onDismiss:function(){return e.setIsModalOpen(!1)}}))})),(0,D.Z)((0,Z.Z)(e),"setIsModalOpen",(function(t){e.setState({isModalOpen:t})})),e}return(0,S.Z)(n,[{key:"render",value:function(){return r.createElement(kt,null,r.createElement(z.z.Primary,{"data-analytics-id":"ComposableHomepageEdit","data-testid":"composable-edit-home-button",onClick:this.edit,active:this.props.loading,disabled:this.props.loading||this.state.isModalOpen},(0,a.t)("Workspace:edit_home")))}}]),n}(r.Component),Zt=(0,H.P)(St),Wt=n(12913),Pt=function(e){var t=(0,d.kC)().screenSize,n=he(),a=(0,c.SE)().isIWSEnabled,l=(0,gt.j)().workspaceConfiguration,s=(0,o.Nc)(l,pt.T.ComposableHomepageEditing),u=a?C:I,g=null==t?void 0:t.onMobile,p=g?u.layout.grid:e.composablePage.layout.grid,m=g?u.widgets:e.composablePage.widgets,f=function(e,t){return Ve(e).some((function(e){var n,a=null===(n=t.getWidget(e.widgetId))||void 0===n?void 0:n.loadableWidget;return a&&a.loading}))}(m,n);return function(e,t){if(null===t)return;Ve(e).forEach((function(e){var n,a,o=null===(n=t.getWidget(e.widgetId))||void 0===n?void 0:n.loadableWidget;o&&Wt.S.registerDashboardWidget(null===(a=o.registration.metadata)||void 0===a?void 0:a.performanceKey)})),Wt.S.dashboardWidgetRegistrationDone()}(m,n),r.createElement(i.M,null,s&&!(null!=t&&t.onMobile)&&r.createElement(Zt,{setComposablePage:e.setComposablePage,composablePage:e.composablePage,loading:f}),r.createElement(K,null,r.createElement(G,null,p.rows.map((function(e,t){return r.createElement(Dt,{row:e,widgets:m.rows[t],widgetCatalog:n,key:"idx-".concat(t),"data-testid":"row-".concat(t)})})))))};var Dt=function(e){var t=e.row.columns.map((function(e){return(e.columnSpan/12*100).toFixed(2)})),n=je();return r.createElement(r.Fragment,null,t.map((function(a,o){return r.createElement(Y,{"data-testid":"column-".concat(o),widthPercentage:a,isLast:o===t.length-1,key:o},e.widgets.columns[o].widgets.map((function(t,a){var i=e.widgetCatalog.getWidget(t.widgetId);if(!i)return null;var l,c,s,d=n(t.widgetId);if(i.inpIntegrationGlobalId)return r.createElement(Te,{widgetCatalogItem:i,key:d});if(null!==(l=i.loadableWidget)&&void 0!==l&&l.loading)return r.createElement(He,{key:d},r.createElement(u.U,null));var g=(null===(c=i.loadableWidget)||void 0===c||null===(s=c.value)||void 0===s?void 0:s.Component)||i.Component;return g?r.createElement(He,{"data-testid":"widget-".concat(t.widgetId,"-").concat(o,"-").concat(a),key:d},r.createElement(g,null)):null})))})))},zt=n(69239),Ht=n(2828),Mt=n(24425),_t=n(79540),Nt=n(35911),Ft=n(47980),Lt="ComposableHomepage",Bt=function e(t,n,a,o,r){var i=this;(0,k.Z)(this,e),this.endpointSupplier=t,this.ssoProxyClient=n,this.customerId=a,this.storeId=o,this.cache=r,(0,D.Z)(this,"composableHomepageCacheKey","composable-homepage"),(0,D.Z)(this,"getCachedComposableHomepage",(0,_.Z)(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.cache.getEncrypted(i.composableHomepageCacheKey);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),(0,D.Z)(this,"getNetworkComposableHomepage",(0,_.Z)(B().mark((function e(){var t,n,a;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=(0,Ft.M)("PageCompositionService_getNetworkComposableHomepage")).start(),e.prev=2,e.next=5,i.endpointSupplier.getEndpoint(Lt);case 5:n=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),(0,zt.H)(e.t0,{customMessage:"Failed to fetch the composable homepage"}),e.t0;case 12:return e.prev=12,e.next=15,i.ssoProxyClient.get(n,{headers:{"Citrix-CustomerId":i.customerId,"Citrix-InstanceId":i.storeId}});case 15:if(!(a=e.sent)){e.next=21;break}return e.next=19,i.cache.setEncrypted(i.composableHomepageCacheKey,a);case 19:e.next=22;break;case 21:i.cache.removeCacheEntry(i.composableHomepageCacheKey);case 22:return t.end(),e.abrupt("return",a);case 26:throw e.prev=26,e.t1=e.catch(12),(0,zt.H)(e.t1,{customMessage:"Failed to fetch the composable homepage"}),t.end(),e.t1;case 31:case"end":return e.stop()}}),e,null,[[2,8],[12,26]])})))),(0,D.Z)(this,"setComposableHomepage",function(){var e=(0,_.Z)(B().mark((function e(t){var n,a;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.endpointSupplier.getEndpoint(Lt);case 3:return n=e.sent,e.next=6,i.ssoProxyClient.put(n,t,{headers:{"Citrix-CustomerId":i.customerId,"Citrix-InstanceId":i.storeId}});case 6:return a=e.sent,e.next=9,i.cache.setEncrypted(i.composableHomepageCacheKey,a);case 9:return e.abrupt("return",a);case 12:throw e.prev=12,e.t0=e.catch(0),(0,zt.H)(e.t0,{customMessage:"Failed to save the composable homepage"}),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()),(0,D.Z)(this,"deleteComposableHomepage",(0,_.Z)(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.endpointSupplier.getEndpoint(Lt);case 3:return t=e.sent,e.next=6,i.ssoProxyClient.delete(t,{headers:{"Citrix-CustomerId":i.customerId,"Citrix-InstanceId":i.storeId}});case 6:i.cache.removeCacheEntry(i.composableHomepageCacheKey),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(0),404!==e.t0.status){e.next=13;break}return e.abrupt("return");case 13:throw(0,zt.H)(e.t0,{customMessage:"Failed to delete the composable homepage"}),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,9]])}))))};function Tt(e){var t={rows:[]};return e.widgetMapping.rows.forEach((function(e){t.rows.push({columns:e.columns.map((function(e){return{widgets:e.widgets.map((function(e){return{widgetId:e.id}}))}}))})})),{layout:w(e.layout.id),widgets:t}}function jt(e){var t={rows:[]};return e.widgets.rows.forEach((function(e){t.rows.push({columns:e.columns.map((function(e){return{widgets:e.widgets.map((function(e){return{id:e.widgetId}}))}}))})})),{layout:{id:e.layout.id},widgetMapping:t}}var qt="composable-page",Rt=function(e){if(!e)return null;var t=!1;return e.widgets.rows.forEach((function(e){e.columns.forEach((function(e){e.widgets.forEach((function(e){var n=Ot[e.widgetId];n&&(e.widgetId=n,e.integrationId&&delete e.integrationId,t=!0)}))}))})),t},Ot={"apps-small":h.cT,"apps-large":h.ly,"desktops-small":h.ON,"desktops-large":h.bU,"files-small":h.MK,"files-large":h.qf,"actions-small":h.ai,"notification-feed":h.Rj},Ut=function(){var e,t=(0,gt.j)().workspaceConfiguration,n=(e=(0,Nt.Yp)().cacheFactory,r.useMemo((function(){var t,n=e.createEncryptedCacheBucket(Nt.gT.composablePage);return{saveComposablePage:function(e){return n.setEncrypted(qt,e)},getSavedComposablePage:(t=(0,_.Z)(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getEncrypted(qt);case 2:if(t=e.sent,!Rt(t)){e.next=7;break}return e.next=7,n.setEncrypted(qt,t);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}}),[e])),i=mt(),l=function(){var e=(0,gt.j)().workspaceConfiguration,t=(0,Nt.Yp)().cacheFactory;return r.useMemo((function(){if(!(0,o.Nc)(e,pt.T.ComposableHomepageRemoteStorage))return null;var n=(0,Mt.K)(e,"pageComposition");if(!n)return(0,zt.H)(new Error("pageComposition service unavailable in workspace configuration (endpointsServices)")),null;var a=(0,_t.v)(n.discoveryUrl),r=Ht.NZ.createSSOProxyClient(e.authManager.proxyUrl),i=e.storeIdentifiers.customerId,l=e.storeIdentifiers.storeGuid,c=t.createEncryptedCacheBucket(Nt.gT.pageComposition);return new Bt(a,r,i,l,c)}),[e])}(),c=r.useState({loading:!0,composablePage:null}),s=(0,F.Z)(c,2),d=s[0],u=s[1],g=function(e){return t=e,n=i,a=(0,N.Z)({},t),o=(0,N.Z)({},n),(0,q.isEqual)(a,o);var t,n,a,o},p=function(){var e=(0,_.Z)(B().mark((function e(t){var a;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=20;break}if(e.prev=1,!g(t)){e.next=8;break}return e.next=5,l.deleteComposableHomepage();case 5:u({composablePage:i,loading:!1}),e.next=12;break;case 8:return e.next=10,l.setComposableHomepage(jt(t));case 10:a=e.sent,u({composablePage:Tt(a),loading:!1});case 12:return e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",!1);case 18:e.next=24;break;case 20:return u({composablePage:t,loading:!1}),e.next=23,n.saveComposablePage((0,N.Z)((0,N.Z)({},t),{},{layout:{id:t.layout.id}}));case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return r.useEffect((function(){var e=function(){var e=(0,_.Z)(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getCachedComposableHomepage().then((function(e){var t=e?Tt(e):i;u({composablePage:t,loading:!1})})).catch((function(){u({composablePage:i,loading:!1})}));case 2:l.getNetworkComposableHomepage().then((function(e){if(e){var t=Tt(e);u({composablePage:t,loading:!1})}})).catch((function(){(0,T.cB)((0,a.t)("Workspace:composable_homepage_fetch_failure"))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.Nc)(t,pt.T.ComposableHomepageEditing)?l?e():n.getSavedComposablePage().then((function(e){if(e){var t=w(e.layout.id);u({composablePage:(0,N.Z)((0,N.Z)({},e),{},{layout:t}),loading:!1})}else u({loading:!1,composablePage:i})})):u({loading:!1,composablePage:i})}),[i,l,t]),(0,N.Z)((0,N.Z)({},d),{},{setComposablePage:p})},At=n(98761),Kt=n(56039),Gt=n(85665),Yt=n(17124),Qt=n(27559),Jt=n(92226),Vt=n(23544),Xt=n(64647),$t=function(e){return(0,c.SE)().isIWSEnabled&&(0,Xt.DR)()?r.createElement(Gt.D,e):r.createElement(Yt.Q,e)},en=function(e){return(0,c.SE)().isIWSEnabled?r.createElement(Qt.E,e):r.createElement(Jt.F,e)},tn=function(){return(0,c.SE)().isIWSEnabled?r.createElement(Vt.UserNotificationBadgeOffIfFeedInNav,null):null},nn=n(16795),an=(0,n(60379).j)({component:function(e){var t=Ut(),n=t.loading,a=t.composablePage,o=t.setComposablePage;return(0,Kt.n)(e.workspaceConfiguration,e.userContext.isIWSEnabled,e.resourceContext)?r.createElement(i.M,null,r.createElement(At.Y,e)):n?r.createElement(l.f,null):r.createElement(r.Fragment,null,r.createElement(s,e),r.createElement(Pt,{setComposablePage:o,composablePage:a}))},path:nn.DK,isAvailable:function(e){return(0,nn.xY)(e.userContext,e.workspaceConfiguration)===nn.Uv.Composable},isLoading:function(e){return!e.userContext.isIWSEnabled&&e.resources.loading},getNavLinkProps:function(){return{title:(0,a.t)("Workspace:home"),icon:$t,selectedIcon:en,secondaryIcon:tn,weight:o.fQ.dashboard}}})},23544:function(e,t,n){"use strict";n.r(t),n.d(t,{UserNotificationBadge:function(){return s},UserNotificationBadgeOffIfFeedInNav:function(){return d}});var a=n(27378),o=n(34388),r=n(49193),i=n(99982),l=n(32593),c=n(2133);function s(){return(0,l.zn)().hasNewFeedCards?a.createElement(c.l,{pulse:!0}):null}var d=function(){var e=(0,r.j)().workspaceConfiguration;return(0,o.Nc)(e,i.T.FeedInLeftNav)?null:a.createElement(s,null)}},56039:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var a=n(66856);function o(e,t,n){return null===n.resources?null:!(t||(0,a.n)(e,a.L.Files)||!(0,a.n)(e,a.L.Desktops))&&(!!n.resources.length&&n.resources.every((function(e){return e.isdesktop})))}}}]);
//# sourceMappingURL=3925.6e800fbcc7336ab41514.js.map