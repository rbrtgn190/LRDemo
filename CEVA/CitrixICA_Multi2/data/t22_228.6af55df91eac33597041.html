(self.webpackChunk_citrite_workspace_ui=self.webpackChunk_citrite_workspace_ui||[]).push([[228],{50228:function(e,t,n){"use strict";n.d(t,{$F:function(){return pe},k6:function(){return le},y1:function(){return ue},hC:function(){return de}});var r=n(64897),s=n(25180),o=n(58640),i=n(55117),a=n(38638),c=n(55936),l=n(64420),p=n(73450),u=n(29603),d=n(27378),h=n(9604),f=n(9128),m=n(3409),v=n(19394),g=n(20883),y=n(67247),C=n(43937),x=n(65547),E=n(97715),b=n(87250),N=n(86985),Z=n(68121),I=n(50120),k=n(16726);n(23615);function F(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var w=n(99443),O=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=F(n.className,r):n.setAttribute("class",F(n.className&&n.className.baseVal||"",r)));var n,r}))},P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),s=r[0],o=r[1];t.removeClasses(s,"exit"),t.addClass(s,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),s=r[0],o=r[1]?"appear":"enter";t.addClass(s,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),s=r[0],o=r[1]?"appear":"enter";t.removeClasses(s,o),t.addClass(s,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,s=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:s,activeClassName:r?s+"-active":n[e+"Active"],doneClassName:r?s+"-done":n[e+"Done"]}},t}(0,k.Z)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],s=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&s&&(r+=" "+s),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,s=n.active,o=n.done;this.appliedClasses[t]={},r&&O(e,r),s&&O(e,s),o&&O(e,o)},n.render=function(){var e=this.props,t=(e.classNames,(0,I.Z)(e,["classNames"]));return d.createElement(w.ZP,(0,u.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(d.Component);P.defaultProps={classNames:""},P.propTypes={};var S,R,B=P,D=n(58999),L=n(24234),j=n(55965),T=n(1406),A=n(21834);(R=S||(S={}))[R.open=0]="open",R[R.closed=1]="closed",R[R.loading=2]="loading";var z=h.StyleSheet.create({loadingIcon:{animationName:[{"0%":{transform:"rotate(0deg)"},"25%":{transform:"rotate(90deg)"},"50%":{transform:"rotate(180deg)"},"75%":{transform:"rotate(270deg)"}}],animationDuration:"0.7s",animationIterationCount:"infinite",animationTimingFunction:"steps(1, end)"},noClick:{pointerEvents:"none"}});function _(e){switch(e.status){case S.closed:return d.createElement(j.w,{size:e.size,className:(0,h.css)(z.noClick)});case S.loading:return d.createElement(T.mT,{size:e.size,className:(0,h.css)(z.noClick,z.loadingIcon)});case S.open:return d.createElement(A.$,{size:e.size,className:(0,h.css)(z.noClick)})}}var M=n(64357);function W(e){return Y(e)}function X(e){return Y(e).then((function(e){return e.filter((function(e){return(0,Z.qRC)(e)}))}))}function Y(e){return m.h.getChildren(e,!1,Z.oKF.FoldersFirst).from("Items").sortBy("Name").sortDirection(M.sortDirections.ASCENDING).expand("Zone").expand("Info").expand("Bundle").select("Name").select("Id").select("FileSizeBytes").select("url").select("Info/*").select("Zone/ZoneType").select("Zone/Id").execute().then((function(e){return e.value}))}var q=n(90598),H=n(31542),V=h.StyleSheet.create({popover:{maxWidth:"400px",zIndex:10,position:"fixed",marginTop:"10px",marginLeft:"10px"}});function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var s=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var U=function(e){(0,a.Z)(n,e);var t=$(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,p.Z)((0,i.Z)(e),"portal",void 0),(0,p.Z)((0,i.Z)(e),"state",{posX:0,posY:0,isOpen:!1}),(0,p.Z)((0,i.Z)(e),"handleMouseEnter",(function(t){e.setState({posX:t.clientX,posY:t.clientY,isOpen:!0})})),(0,p.Z)((0,i.Z)(e),"handleMouseLeave",(function(){e.setState({posX:0,posY:0,isOpen:!1})})),e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.portal=document.createElement("div"),this.portal.className="popover-portal",document.body.appendChild(this.portal),this.renderPopoverBody()}},{key:"componentDidUpdate",value:function(){this.renderPopoverBody()}},{key:"componentWillUnmount",value:function(){H.unmountComponentAtNode(this.portal),document.body.removeChild(this.portal)}},{key:"render",value:function(){return this.props.isDisabled?d.createElement("span",{className:this.props.className},this.props.hoverTrigger):d.createElement("span",{className:this.props.className,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.props.hoverTrigger)}},{key:"renderPopoverBody",value:function(){var e={top:"".concat(this.state.posY,"px"),right:"".concat(window.innerWidth-this.state.posX,"px")};H.render(this.state.isOpen?d.createElement("div",{className:(0,h.css)(V.popover),style:e},d.createElement(q.WY,null,this.props.children)):d.createElement("div",null),this.portal)}}]),n}(d.Component),G=n(99890);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q="16px",ee="10px",te=h.StyleSheet.create({action:{flex:"0 0 ".concat(Q),width:Q,height:Q,margin:"0 0 0 ".concat(ee)},checkbox:{flex:"0 0 ".concat(Q),width:Q,height:"22px"},index:{marginLeft:"10px"},itemButton:{overflow:"hidden",flex:"1 1"},item:K({display:"flex",alignItems:"center"},G.ellipsis),icon:{flex:"0 0 auto",margin:"0 ".concat(ee)},children:{marginLeft:"16px"},name:K({flex:"1 1"},G.ellipsis),unselectable:{cursor:"default"},selected:{background:N.blue100},node:{minHeight:"36px",boxSizing:"border-box",display:"flex",alignItems:"center",padding:"5px 5px 3px",whiteSpace:"nowrap"},currentLocation:{marginLeft:ee},alert:{display:"inline-flex",marginLeft:ee},editable:{display:"flex",flex:"1 1"},created:{opacity:0,transition:"opacity 1s linear"},createdVisible:{opacity:1},editButtons:{marginLeft:"10px",display:"flex",alignItems:"center"},hide:{display:"none"}});function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var s=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var oe="new_folder_id",ie=function(e){(0,a.Z)(n,e);var t=se(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,p.Z)((0,i.Z)(e),"state",{name:e.props.item.Name,status:S.closed}),(0,p.Z)((0,i.Z)(e),"handleInputRef",(function(t){e.state.name===(0,L.t)("citrix-files-ui:treeview.untitled")&&t&&(t.focus(),t.setSelectionRange(0,e.state.name.length))})),(0,p.Z)((0,i.Z)(e),"setName",(function(t){e.setState({name:t})})),(0,p.Z)((0,i.Z)(e),"save",(function(){e.state.name&&m.h.createFolder(e.props.item.Parent.url,{Name:e.state.name}).execute().then((function(t){e.props.onCreateFolderFinished(re(re({},t),{},{Parent:e.props.item.Parent,Children:[]}))})).catch((function(t){e.setState({createFolderError:t.responseJSON.message.value})}))})),(0,p.Z)((0,i.Z)(e),"stopBubbling",(function(e){e.stopPropagation()})),(0,p.Z)((0,i.Z)(e),"cancel",(function(){e.props.onCreateFolderFinished(null)})),(0,p.Z)((0,i.Z)(e),"toggle",(function(t){e.stopClickPropagation(t),e.isCreatingFolderForCurrentItem()||(e.state.status===S.closed?e.haveChildrenBeenLoaded()?e.setState({status:S.open}):e.fetchChildren(e.props.item.Id):e.setState({status:S.closed}))})),(0,p.Z)((0,i.Z)(e),"stopClickPropagation",(function(e){e&&e.stopPropagation&&e.stopPropagation()})),(0,p.Z)((0,i.Z)(e),"select",(function(t){if(e.stopClickPropagation(t),!e.props.createFolder&&(e.getDisabledInfo().enabled||e.canCreateFolder())){var n=[e.props.item];e.props.showCheckboxes&&e.selectChildren(n,e.props.item),e.props.onItemsSelected(n,!e.isSelected())}})),(0,p.Z)((0,i.Z)(e),"selectChildren",(function(t,n){n.Children&&n.Children.forEach((function(n){t.push(n),e.selectChildren(t,n)}))})),e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.state.status===S.open,r=this.getDisabledInfo(),s=r.enabled||this.canCreateFolder(),o=(0,Z.qRC)(this.props.item)&&(!this.haveChildrenBeenLoaded()||this.getChildren().length>0),i=!r.enabled&&r.disabledReason||this.state.createFolderError,a=this.props.showCheckboxes&&r.enabled&&("onlyFolders"===this.props.selectionMode&&(0,Z.qRC)(this.props.item)||"onlyFiles"===this.props.selectionMode&&!(0,Z.qRC)(this.props.item));return d.createElement("div",{role:"treeitem","aria-expanded":t?"true":"false"},d.createElement("div",{className:(0,h.css)(te.node,this.isHighlighted()&&te.selected)},o?d.createElement(g.z.Wrapper,{onClick:this.toggle,disabled:this.state.status===S.loading,className:(0,h.css)(te.action)},d.createElement(_,{status:this.state.status,size:16})):d.createElement("div",{className:(0,h.css)(te.action)}),d.createElement("span",{onClick:this.stopClickPropagation,className:(0,h.css)(te.checkbox,!this.props.showCheckboxes&&te.hide),role:""},a&&d.createElement(y.X,{checked:this.isSelected(),onChange:this.select,"aria-label":this.props.item.Name})),this.props.showIndex&&this.props.indexes.length>0&&d.createElement("span",{className:(0,h.css)(te.index)},"[",this.props.indexes.join("."),"]"),d.createElement(g.z.Wrapper,{onClick:this.select,disabled:!s,className:(0,h.css)(this.props.item.Id!==oe&&te.itemButton)},d.createElement("div",{className:(0,h.css)(te.item)},d.createElement(D.S,{item:this.props.item,size:16,className:(0,h.css)(te.icon)}),this.props.item.Id!==oe&&d.createElement("span",{className:(0,h.css)(te.name)},d.createElement(C.xv,null,this.props.item.Name),this.props.currentParentId===this.props.item.Id&&d.createElement("span",{className:(0,h.css)(te.currentLocation)},d.createElement(C.Bq,null,this.props.currentLocationString))))),this.props.item.Id===oe&&d.createElement(x.l,{className:(0,h.css)(te.editable),onSubmit:this.save,onClick:this.stopBubbling},d.createElement(E.o,{inputRef:this.handleInputRef,value:this.state.name,onChange:this.setName,errorMessage:this.state.name.length>100&&(0,L.t)("citrix-files-ui:treeview.folder_name_length_error",{value:100}),"aria-label":(0,L.t)("citrix-files-ui:treeview.folder_name")}),d.createElement("div",{className:(0,h.css)(te.editButtons)},d.createElement(g.z.TextPrimary,{disabled:!this.state.name||this.state.name.length>100,type:"submit"},(0,L.t)("citrix-files-ui:treeview.save")),d.createElement(g.z.TextPrimary,{type:"button",onClick:this.cancel},(0,L.t)("citrix-files-ui:treeview.cancel")))),d.createElement(B,{classNames:{appear:(0,h.css)(te.createdVisible),exit:(0,h.css)(te.created)},in:this.props.createdFolderId===this.props.item.Id,timeout:1e3,unmountOnExit:!0},d.createElement("span",null,(0,L.t)("citrix-files-ui:treeview.folder_created"))),i&&d.createElement(U,{className:(0,h.css)(te.alert),hoverTrigger:d.createElement(b.O,{size:16,color:N.grey600,hoverColor:N.orange800})},i)),this.hasChildren()&&d.createElement("div",{style:{display:t?"block":"none"},className:(0,h.css)(te.children),role:"group"},this.getChildren().map((function(t,r){return d.createElement(n,(0,u.Z)({key:t.Id},e.props,{item:t,indexes:[].concat((0,v.Z)(e.props.indexes),[r+1])}))}))))}},{key:"hasChildren",value:function(){return!!this.haveChildrenBeenLoaded()&&this.getChildren().length>0}},{key:"componentDidMount",value:function(){this.autoExpand()&&this.fetchChildren(this.props.item.Id)}},{key:"componentDidUpdate",value:function(e){e.createFolder!==this.props.createFolder&&this.isCreatingFolderForCurrentItem()&&(this.setState({status:S.open}),this.haveChildrenBeenLoaded()||this.fetchChildren(this.props.item.Id))}},{key:"autoExpand",value:function(){return!this.props.item.Parent&&!!this.props.rootFolder}},{key:"haveChildrenBeenLoaded",value:function(){return!!this.props.item.Children}},{key:"getChildren",value:function(){var e=(0,v.Z)(this.props.item.Children);return this.isCreatingFolderForCurrentItem()&&e.push((0,Z.L60)({Id:oe,Parent:this.props.item,Name:(0,L.t)("citrix-files-ui:treeview.untitled"),Children:[]})),e}},{key:"isCreatingFolderForCurrentItem",value:function(){return this.props.createFolder&&1===this.props.selectedItemIds.length&&this.props.selectedItemIds[0]===this.props.item.Id}},{key:"isHighlighted",value:function(){return!this.props.showCheckboxes&&this.isSelected()}},{key:"isSelected",value:function(){var e=this.props.selectedItemIds;return-1!==(void 0===e?[]:e).indexOf(this.props.item.Id)}},{key:"fetchChildren",value:function(e){var t=this;this.setState({status:S.loading}),this.fetchItems(e).then((function(e){t.props.filterTreeNodes&&(e=t.props.filterTreeNodes(e)),e.forEach((function(e){e.Parent=t.props.item})),t.setState({status:S.open},(function(){t.props.setChildren(t.props.item,e)}))})).catch((function(e){t.props.onError(e)}))}},{key:"fetchItems",value:function(e){return this.props.showFiles?W(e):X(e)}},{key:"canCreateFolder",value:function(){return!!this.props.canCreateFolder&&this.props.canCreateFolder(this.props.item)}},{key:"getDisabledInfo",value:function(){if(this.props.isNodeDisabled)return this.props.isNodeDisabled(this.props.item);return{enabled:!0,disabledReason:""}}}]),n}(d.Component),ae=h.StyleSheet.create({treeview:{fontFamily:"publicsans-regular,'Helvetica Neue',Helvetica,Arial,sans-serif"}});function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var s=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}function le(e){return d.createElement(de,e)}function pe(e){return d.createElement(de,(0,u.Z)({},e,{showFiles:!0}))}function ue(e){return d.createElement(de,(0,u.Z)({},e,{showFiles:!0,showIndex:!0}))}var de=function(e){(0,a.Z)(n,e);var t=ce(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,p.Z)((0,i.Z)(e),"state",{rootItems:[]}),(0,p.Z)((0,i.Z)(e),"setChildren",(function(t,n){t.Children=n;var r=e.props.selectedItemIds,s=void 0===r?[]:r;e.props.showCheckboxes&&-1!==s.indexOf(t.Id)&&e.props.onItemsSelected(n,!0),e.forceUpdate()})),(0,p.Z)((0,i.Z)(e),"onCreateFolderFinished",(function(t){(e.props.onCreateFolderFinished(t),t)&&(t.Parent.Children.push(t),e.setState({createdFolderId:t.Id}),e.props.onItemsSelected([t],!0),setTimeout((function(){e.setState({createdFolderId:null})}),2e3))})),e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this;return d.createElement("div",{className:(0,h.css)(ae.treeview),role:"tree"},this.state.rootItems.map((function(t){return d.createElement(ie,(0,u.Z)({key:t.Id},e.props,{indexes:[],item:t,setChildren:e.setChildren,createdFolderId:e.state.createdFolderId,onCreateFolderFinished:e.onCreateFolderFinished}))})))}},{key:"componentDidMount",value:function(){var e=this;this.props.rootFolder?this.setState((function(e,t){return{rootItems:[t.rootFolder]}})):Promise.all([this.fetchRootNodes(),this.fetchFileBox()]).then((function(t){var n=(0,r.Z)(t,2),s=n[0],o=n[1];o&&s.unshift(o),e.props.filterTreeNodes&&(s=e.props.filterTreeNodes(s)),e.setState({rootItems:s})})).catch((function(t){e.props.onError(t)}))}},{key:"fetchRootNodes",value:function(){return f.n.getTopFolders().expand("Zone").expand("Info").select("Id").select("Name").select("Info/*").select("Zone/ZoneType").select("url").execute().then((function(e){return e.value}))}},{key:"fetchFileBox",value:function(){if(this.props.showFileBox)return m.h.get("box").execute()}}]),n}(d.Component)}}]);
//# sourceMappingURL=228.6af55df91eac33597041.js.map