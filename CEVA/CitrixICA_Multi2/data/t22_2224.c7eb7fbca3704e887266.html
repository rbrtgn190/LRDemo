(self.webpackChunk_citrite_workspace_ui=self.webpackChunk_citrite_workspace_ui||[]).push([[2224],{30065:function(e,t,r){"use strict";r.d(t,{h:function(){return s},y:function(){return a}});var n=r(68121),o=r(92471),i=r.n(o);function s(e,t,r){return l({capability:n.FqW.ScopedCopy,fallbackCapability:n.FqW.Copy,sourceUrl:e,destinationUrl:t,sourceCapabilities:r})}function a(e,t,r){return l({capability:n.FqW.ScopedMove,fallbackCapability:n.FqW.Move,sourceUrl:e,destinationUrl:t,sourceCapabilities:r})}function c(e){var t=e.split("/");return t.length>0?t[1]:"sf"}function l(e){var t=e.sourceCapabilities.find((function(t){return t.Name===e.capability}));return t?function(e,t){var r=new(i())(e.destinationUrl),n=new(i())(e.sourceUrl),o=c(n.path()),s=c(r.path()),a="".concat(n.scheme(),"://").concat(n.host(),"/").concat(o),l="".concat(r.scheme(),"://").concat(r.host(),"/").concat(s);return t.ScopedHostsAndProviders.some((function(t){return"self"===t&&a===l||("sf"===t.toLowerCase()&&"sf"===s.toLowerCase()||!!e.destinationUrl.startsWith(t))}))}(e,t):e.sourceCapabilities.some((function(t){return t.Name===e.fallbackCapability}))}},4426:function(e,t,r){"use strict";r.d(t,{l:function(){return o}});var n=r(3409);function o(e,t){return Promise.all(e.map((function(e){return n.h.copy(e.url,t.Id).execute()})))}},13833:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var n=r(29603),o=r(27378),i=r(24234),s=r(30065),a=r(4426),c=r(91564);function l(e){e.showModal(o.createElement(c.Q,(0,n.Z)({},e,{title:(0,i.t)("citrix-files-ui:copy.title"),saveButtonText:(0,i.t)("citrix-files-ui:copy.copy"),onExecuteAction:a.l,getSubtitle:function(e){return(0,i.t)("citrix-files-ui:copy.copying_item_to",e)},isNodeDisabled:function(e,t,r){var n=t.parentFolder,o=r.parentCapabilities;return e.Info&&!e.Info.CanUpload?{enabled:!1,disabledReason:(0,i.t)("citrix-files-ui:copy.need_permission")}:e.url&&!(0,s.h)(n.url,e.url,o)?{enabled:!1,disabledReason:(0,i.t)("citrix-files-ui:copy.copy_target_not_allowed")}:{enabled:!0}}})))}},91564:function(e,t,r){"use strict";r.d(t,{Q:function(){return _}});var n=r(29603),o=r(25180),i=r(58640),s=r(55117),a=r(38638),c=r(55936),l=r(64420),u=r(73450),d=r(27378),p=r(9604),f=r(19472),h=r(15687),v=r(1406),b=r(20883),m=r(98106),y=r(24234),F=r(43761),C=r(66801),Z=r(30065),I=r(20913),g=r(4853),x=p.StyleSheet.create({modal:{position:"relative",minHeight:"400px"},subtitle:{marginBottom:I.mediumSpace},actions:(0,u.Z)({display:"flex",justifyContent:"space-between"},g.onMobile,{flexDirection:"column",alignItems:"flex-start",":not(fobar) div:first-child":{marginBottom:"10px"},":not(fobar) button":{marginLeft:"0px"}})});function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var _=function(e){(0,a.Z)(r,e);var t=w(r);function r(){var e;(0,o.Z)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,u.Z)((0,s.Z)(e),"state",{isReady:!1,isActive:!1,parentCapabilities:[]}),(0,u.Z)((0,s.Z)(e),"isNodeDisabled",(function(t){return e.props.isNodeDisabled(t,e.props,e.state)})),(0,u.Z)((0,s.Z)(e),"onCreateFolderFinished",(function(){e.setState({createFolder:!1})})),(0,u.Z)((0,s.Z)(e),"canCreate",(function(){return e.state.folder&&(0,Z.h)(e.props.parentFolder.url,e.state.folder.url,e.state.parentCapabilities)})),(0,u.Z)((0,s.Z)(e),"createFolder",(function(){e.setState({createFolder:!0})})),(0,u.Z)((0,s.Z)(e),"canCreateFolder",(function(t){return e.props.canCreateFolder?e.props.canCreateFolder(t,e.props,e.state):e.isNodeDisabled(t).enabled})),(0,u.Z)((0,s.Z)(e),"handleOnFolderSelected",(function(t){e.setState({folder:t})})),(0,u.Z)((0,s.Z)(e),"save",(function(){e.setState({isActive:!0}),e.props.onExecuteAction(e.props.selectedItems,e.state.folder,e.state.parentCapabilities).then((function(t){var r,n,o,i,s,a=t.map((function(t){return N(N({},t),{},{Parent:{Id:e.state.folder.Id}})}));e.props.onCloseSuccess(a),(null!==(r=null===(n=e.props.selectedItems[0].Zone)||void 0===n?void 0:n.Id)&&void 0!==r?r:null===(o=e.props.selectedItems[0].Parent)||void 0===o||null===(i=o.Zone)||void 0===i?void 0:i.Id)===(null===(s=e.state.folder.Zone)||void 0===s?void 0:s.Id)&&e.props.getSuccessMessage?(0,f.t5)(e.props.getSuccessMessage(e.state.folder)):e.props.getInfoMessage&&(0,f.QD)(e.props.getInfoMessage(e.state.folder))})).catch((function(t){e.setState({isActive:!1});var r=(0,C.V)(t);r&&(0,f.cB)(r)}))})),e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){var e=this;(0,F.p)(this.props.parentFolder.url).then((function(t){e.setState({parentCapabilities:t.value,isReady:!0})}))}},{key:"render",value:function(){var e=this.state.folder&&!this.isNodeDisabled(this.state.folder).enabled;return d.createElement(h.u_,(0,n.Z)({},this.props,{className:(0,p.css)(x.modal),title:this.props.title}),d.createElement(h.fe,null,d.createElement("div",{className:(0,p.css)(x.subtitle)},this.getSubtitle()),this.state.isReady?d.createElement(m.L,{accountPreferences:this.props.accountPreferences,user:this.props.user,isNodeDisabled:this.isNodeDisabled,parentId:this.props.parentFolder.Id,selectedFolderId:this.state.folder&&this.state.folder.Id,canCreateFolder:this.canCreateFolder,createFolder:this.state.createFolder,onCreateFolderFinished:this.onCreateFolderFinished,onFolderSelected:this.handleOnFolderSelected}):d.createElement(v.fz,null)),d.createElement(h.mz,null,d.createElement("div",{className:(0,p.css)(x.actions)},d.createElement(b.z.Group,null,d.createElement(b.z.Primary,{onClick:this.save,active:this.state.isActive,disabled:!this.state.isReady||!this.state.folder||e||this.state.createFolder},this.props.saveButtonText),d.createElement(b.z.Secondary,{onClick:this.props.onDismiss},(0,y.t)("citrix-files-ui:cancel"))),d.createElement(b.z.TextPrimary,{disabled:!this.canCreate(),onClick:this.createFolder},(0,y.t)("citrix-files-ui:create_folder")))))}},{key:"getSubtitle",value:function(){var e=this.props.selectedItems,t=this.state.folder,r=t?t.Name:"...";return this.props.getSubtitle({destinationFolder:r,fileName:e[0].Name,count:e.length})}}]),r}(d.Component)},46594:function(e,t,r){"use strict";r.d(t,{b:function(){return n},I:function(){return i}});var n,o=r(30065);function i(e){var t=e.selection,r=e.targetFolder,i=e.selectionParent,s=e.parentCapabilities,a=e.reasonMessageMap;return!r.Info||r.Info.CanUpload||r.Info.CanAddNode?r.url&&!(0,o.y)(i.url,r.url,s)?{enabled:!1,disabledReason:a[n.targetNotAllowed]}:t.find((function(e){return e.Id===r.Id}))?{enabled:!1,disabledReason:a[n.cannotMoveToSelected]}:i.Id===r.Id?{enabled:!1,disabledReason:a[n.cannotMoveToCurrent]}:{enabled:!0}:{enabled:!1,disabledReason:a[n.needPermission]}}!function(e){e[e.needPermission=0]="needPermission",e[e.targetNotAllowed=1]="targetNotAllowed",e[e.cannotMoveToSelected=2]="cannotMoveToSelected",e[e.cannotMoveToCurrent=3]="cannotMoveToCurrent"}(n||(n={}))},99921:function(e,t,r){"use strict";r.d(t,{B:function(){return i}});var n=r(68121),o=r(3409);function i(e,t,r){return r.find((function(e){return e.Name===n.FqW.BulkMove}))?o.h.bulkMove(e.map((function(e){return s(e)})),t.url).execute().then((function(e){return e.value})):Promise.all(e.map((function(e){var r={Parent:{Id:t.Id}};return o.h.update(s(e),r).execute()})))}function s(e){return e.StreamID?e.url.replace(e.Id,e.StreamID):e.url}},23404:function(e,t,r){"use strict";r.d(t,{M:function(){return u}});var n=r(29603),o=r(73450),i=r(27378),s=r(24234),a=r(91564),c=r(46594),l=r(99921);function u(e){return e.showModal(i.createElement(a.Q,(0,n.Z)({},e,{title:(0,s.t)("citrix-files-ui:move.title"),saveButtonText:(0,s.t)("citrix-files-ui:move.move"),onExecuteAction:l.B,getSubtitle:function(e){return(0,s.t)("citrix-files-ui:move.moving_item_to",e)},isNodeDisabled:function(e,t,r){var n,i=t.selectedItems,a=t.parentFolder,l=r.parentCapabilities;return(0,c.I)({parentCapabilities:l,selection:i,targetFolder:e,selectionParent:a,reasonMessageMap:(n={},(0,o.Z)(n,c.b.needPermission,(0,s.t)("citrix-files-ui:move.need_permission")),(0,o.Z)(n,c.b.targetNotAllowed,(0,s.t)("citrix-files-ui:move.move_target_not_allowed")),(0,o.Z)(n,c.b.cannotMoveToSelected,(0,s.t)("citrix-files-ui:move.cannot_move_to_selected")),(0,o.Z)(n,c.b.cannotMoveToCurrent,(0,s.t)("citrix-files-ui:move.cannot_move_to_current")),n)})},canCreateFolder:function(e,t,r){var n=t.isNodeDisabled(e,t,r);return!0===n.enabled||n.disabledReason===(0,s.t)("citrix-files-ui:move.cannot_move_to_current")}})))}},98106:function(e,t,r){"use strict";r.d(t,{L:function(){return y}});var n=r(25180),o=r(58640),i=r(55117),s=r(38638),a=r(55936),c=r(64420),l=r(73450),u=r(27378),d=r(9604),p=r(19472),f=r(68121),h=r(24234),v=r(50228);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.Z)(this,r)}}var m=d.StyleSheet.create({treeview:{overflow:"auto"}}),y=function(e){(0,s.Z)(r,e);var t=b(r);function r(){var e;(0,n.Z)(this,r);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),(0,l.Z)((0,i.Z)(e),"filterTreeNodes",(function(t){return t.filter((function(t){return!t.Id.startsWith("c-")&&(!!(e.props.accountPreferences.EnableHomeFolders&&e.props.user.Roles.includes(f.i44.Employee)||!t.Id.startsWith("foh"))&&!t.Bundle)}))})),(0,l.Z)((0,i.Z)(e),"isNodeDisabled",(function(t){var r={enabled:"favorites"!==t.Id};return r.enabled&&e.props.isNodeDisabled&&(r=e.props.isNodeDisabled(t)),r})),(0,l.Z)((0,i.Z)(e),"selectFolders",(function(t){e.props.onFolderSelected(t[0])})),e}return(0,o.Z)(r,[{key:"render",value:function(){var e=[];return this.props.selectedFolderId&&e.push(this.props.selectedFolderId),u.createElement("div",{className:(0,d.css)(m.treeview),style:{height:this.props.height||"250px"}},u.createElement(v.k6,{showFileBox:this.props.showFileBox&&this.props.user.Roles.includes(f.i44.CanUseFileBox),filterTreeNodes:this.filterTreeNodes,canCreateFolder:this.props.canCreateFolder,createFolder:this.props.createFolder,onCreateFolderFinished:this.props.onCreateFolderFinished,onError:p.cB,isNodeDisabled:this.isNodeDisabled,currentParentId:this.props.parentId||this.props.accountPreferences.AccountID,currentLocationString:(0,h.t)("citrix-files-ui:treeview.current_location"),selectedItemIds:e,onItemsSelected:this.selectFolders}))}}]),r}(u.Component)}}]);
//# sourceMappingURL=2224.c7eb7fbca3704e887266.js.map